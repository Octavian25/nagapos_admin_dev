(window.webpackJsonp=window.webpackJsonp||[]).push([[132],{1308:function(e,a,t){"use strict";t.r(a);var n=t(19),l=t(20),r=t(33),i=t(22),s=t(21),o=t(0),m=t.n(o),c=t(28),d=t(123),b=t(58),u=t(311),g=t(312),p=t(78),h=t(11),k=t(211),f=t(210),E=t.n(f),_=function(e){Object(i.a)(t,e);var a=Object(s.a)(t);function t(e){var l;return Object(n.a)(this,t),(l=a.call(this,e)).state={date:new Date,kondisi_barang:"kosong",isLoadingBatal:!1},l}return Object(l.a)(t,[{key:"setStartDate",value:function(e){this.setState({tgl_awal:new Date(e)})}},{key:"setLastDate",value:function(e){this.setState({tgl_akhir:new Date(e)})}},{key:"render",value:function(){var e=this;return m.a.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off"},m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-8"},m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-lg-6"},m.a.createElement(u.a,{onChange:this.props.getKodeMember,name:"kode_member",component:p.e,type:"text",label:"Kode Member",placeholder:"Masukan Kode Member"})),m.a.createElement("div",{className:"col-lg-6"},m.a.createElement(u.a,{id:"lihat_transaksi_nama_member",name:"nama_member",readOnly:!0,component:p.e,type:"text",label:"Nama Member",placeholder:"Masukan Nama Member"})))),m.a.createElement("div",{className:"col-4 text-center"},m.a.createElement(m.a.Fragment,null," \xa0 "),m.a.createElement("h1",{style:"POINT"===this.props.point?{fontSize:"4.875rem",position:"absolute",left:"56px",top:"25px"}:{fontSize:"4.875rem",position:"absolute",left:"110px",top:"25px"}}," ",this.props.point," ")),m.a.createElement("div",{className:"col-8"},m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-lg-6"},m.a.createElement(u.a,{id:"lihat_transaksi_alamat",name:"alamat",readOnly:!0,component:p.e,type:"text",label:"Alamat",placeholder:"Masukan Alamat"})),m.a.createElement("div",{className:"col-lg-6"},m.a.createElement(u.a,{id:"lihat_transaksi_no_hp",name:"no_hp",readOnly:!0,component:p.e,type:"text",label:"No Hp",placeholder:"Masukan No Hp"})))),m.a.createElement("div",{className:"col-4 text-center"}),m.a.createElement("div",{className:"col-lg-4"},m.a.createElement(u.a,{name:"dari_tanggal",component:p.c,type:"text",selected:this.state.tgl_awal,onChange:function(a){return e.setStartDate(a)},label:"Dari Tanggal",placeholder:"Masukan Dari Tanggal"})),m.a.createElement("div",{className:"col-lg-4"},m.a.createElement(u.a,{name:"sampai_tanggal",component:p.c,type:"text",selected:this.state.tgl_akhir,onChange:function(a){return e.setLastDate(a)},label:"Sampai Tanggal",placeholder:"Masukan Sampai Tanggal"})),m.a.createElement("div",{className:"col-lg-4"},m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-lg-6"},m.a.createElement("label",null,"\xa0"),m.a.createElement("button",{type:"submit",value:"PDF",name:"type_btn",className:"btn btn-primary btn-block"},this.props.isLoading?m.a.createElement(m.a.Fragment,null,m.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Lihat"):"Lihat")),m.a.createElement("div",{className:"col-lg-6"},m.a.createElement("label",null,"\xa0"),m.a.createElement("button",{type:"button",onClick:this.props.batalLihatTransaksi,className:"btn btn-warning btn-block"},this.props.isLoadingBatal?m.a.createElement(m.a.Fragment,null,m.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Batal"):"Batal")))),m.a.createElement("div",{className:"col-12"},m.a.createElement(k.a,{keyField:"tgl_trx",exportCsv:!0,data:this.props.datatransaksimember,columns:this.props.columns,empty:!0,textEmpty:"Data Transaksi Member Kosong"}))),this.props.isLoadingBatal||this.props.isLoading?m.a.createElement(E.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}]),t}(o.Component);_=Object(g.a)({form:"HeadTransaksiMember",enableReinitialize:!0})(_);var v=Object(b.b)(function(e){return{initialValues:{dari_tanggal:Object(h.h)(),sampai_tanggal:Object(h.h)()},datakondisi:e.datamaster.getDataKondisiBarang,setHancurBarang:e.databarang.setHancurBarang}},null)(_),L=t(36),N=t(212),O=t(13),y=t(64),x=function(e){Object(i.a)(t,e);var a=Object(s.a)(t);function t(e){var l;return Object(n.a)(this,t),(l=a.call(this,e)).state={isLoading:!1,isLoadingBatal:!1,point:"POINT",datatransaksimember:[],columns:[{dataField:"tgl_trx",text:"Tanggal Trx",sort:!0},{dataField:"kategori",text:"Kategori"},{dataField:"deskripsi",text:"Deskripsi"},{dataField:"berat",text:"Berat",formatter:function(e){return m.a.createElement("span",null,parseFloat(e).toFixed(3))}},{dataField:"jumlah_rp",text:"Jumlah Rp",formatter:function(e){return m.a.createElement("span",null,parseFloat(e).toLocaleString("kr-KO"))}},{dataField:"poin_awal",text:"Poin Awal",formatter:function(e,a){return e||0}},{dataField:"poin",text:"Poin",formatter:function(e,a){return e||0}},{dataField:"poin_akhir",text:"Poin Akhir",formatter:function(e,a){return e||0}}]},l.handleSubmit=l.handleSubmit.bind(Object(r.a)(l)),l.getKodeMember=l.getKodeMember.bind(Object(r.a)(l)),l}return Object(l.a)(t,[{key:"batalLihatTransaksi",value:function(){var e=this;this.setState({isLoadingBatal:!0}),setTimeout(function(){e.setState({isLoadingBatal:!1,datatransaksimember:[]}),e.props.dispatch(Object(y.d)("HeadTransaksiMember"))},1e3)}},{key:"getKodeMember",value:function(e){var a=this;clearTimeout(this.delay),this.delay=setTimeout(function(){if(void 0===e.kode_member)return!1;a.setState({isLoading:!0}),Object(O.d)("member/get/by-kode-member/"+e.kode_member).then(function(e){a.setState({isLoading:!1}),e.data.forEach(function(e,t){document.getElementById("lihat_transaksi_nama_member").value=e.nama_customer,document.getElementById("lihat_transaksi_alamat").value=e.alamat_customer,document.getElementById("lihat_transaksi_no_hp").value=e.no_hp,a.setState({datatransaksimember:[],point:e.point||0,isLoading:!1})})}).catch(function(e){Object(L.e)("info","Data member tidak ada"),a.setState({datatransaksimember:[],isLoading:!1})})},1500)}},{key:"handleSubmit",value:function(e){var a=this,t={kode_member:e.kode_member,tgl_awal:Object(h.e)(N(new Date(e.dari_tanggal)).format("YYYY-MM-DD")),tgl_akhir:Object(h.e)(N(new Date(e.sampai_tanggal)).format("YYYY-MM-DD"))};Object(O.j)("trxmember/get/by-tanggal",t).then(function(e){0===e.data.length?(Object(L.e)("info","Data Yang Di Cari Tidak Ada !!!"),a.setState({isLoading:!1,export:!1})):(Object(L.e)("success","Laporan Transaksi Member Tersedia"),Object(h.m)("tgl_laporan",JSON.stringify(t)),a.setState({export:!0,isLoading:!1,datatransaksimember:e.data}))}).catch(function(e){Object(L.e)("info","Data Yang Di Cari Tidak Ada !!!"),a.setState({isLoading:!1,export:!1})})}},{key:"render",value:function(){var e=this;return m.a.createElement("div",null,m.a.createElement("ol",{className:"breadcrumb float-xl-right"},m.a.createElement("li",{className:"breadcrumb-item"},m.a.createElement(c.b,{to:"#"},"Member")),m.a.createElement("li",{className:"breadcrumb-item active"},"Lihat Transaksi Member")),m.a.createElement("h1",{className:"page-header"},"Lihat Transaksi Member "),m.a.createElement(d.a,null,m.a.createElement(d.c,null,"Lihat Transaksi Member"),m.a.createElement("br",null),m.a.createElement("div",{className:"container"},m.a.createElement(v,{onChange:function(a){return e.getKodeMember(a)},batalLihatTransaksi:function(){return e.batalLihatTransaksi()},onSubmit:function(a){return e.handleSubmit(a)},columns:this.state.columns,point:this.state.point,isLoadingBatal:this.state.isLoadingBatal,datatransaksimember:this.state.datatransaksimember}),m.a.createElement("br",null)),m.a.createElement("br",null)),this.state.isLoadingBatal||this.state.isLoading?m.a.createElement(E.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}]),t}(m.a.Component);x=Object(g.a)({form:"LihatTransaksiMember",enableReinitialize:!0})(x);a.default=Object(b.b)(null)(x)}}]);
//# sourceMappingURL=132.9ba0b84f.chunk.js.map