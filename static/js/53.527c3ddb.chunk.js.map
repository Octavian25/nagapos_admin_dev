{"version":3,"sources":["pages/Barang/PindahBarang/HeadPindahBarang.jsx","pages/Barang/PindahBarang/FormPindahBarang.jsx","Validasi/Barang/PindahBarang/ValidasiPindahBarang.jsx"],"names":["HeadPindahBarang","props","_this","Object","classCallCheck","this","_super","call","state","date","Date","isLoadingBatal","isLoadingBaki","_this2","dispatch","getDataGudang","getDataBaki","setTimeout","setState","kode_gudang","change","e","_this3","clearTimeout","delay","getData","then","res","data","length","ToastNotification","JSON","parse","localStorage","getItem","findIndex","hasil","kode_barcode","push","setItem","stringify","setBarangPindah","catch","err","_this4","_this5","react_default","a","createElement","onSubmit","handleSubmit","autoComplete","onKeyPress","key","preventDefault","className","Field","id","label","name","onChange","options","datagudang","filter","list","undefined","map","value","nama_gudang","placeholder","component","ReanderSelect","databaki","kode_baki","nama_baki","field","getKodeBarcode","target","ReanderField","type","tabel","keyField","exportCsv","pagination","columns","empty","textEmpty","disabled","submitting","isLoading","Fragment","onClick","batalHancur","loading_default","loading","background","loaderColor","Component","reduxForm","form","enableReinitialize","validate","ValidasiPindahBarang","connect","datamaster","databarang","FormPindahBarang","isEdit","modalDialog","dataField","text","footerAttrs","colSpan","footer","cell","row","num","index","formatter","toFixed","columnData","reduce","acc","item","csvExport","headerClasses","rowcontent","hapusdata","bind","assertThisInitialized","Swal","fire","title","icon","position","cancelButtonText","showCancelButton","confirmButtonText","showConfirmButton","result","isConfirmed","splice","barang_tmp","kode_toko","detail_barang","postData","error","errorhandling","test","response","react_router_dom","to","panel","PindahBarang_HeadPindahBarang","React","errors","statusAktif"],"mappings":"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","file":"static/js/53.527c3ddb.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Field, reduxForm } from \"redux-form\";\r\nimport { setBarangPindah } from \"../../../actions/databarang_action\";\r\nimport { getDataBaki, getDataGudang } from \"../../../actions/datamaster_action\";\r\nimport {\r\n  ReanderSelect,\r\n  SkeletonLoading,\r\n  ReanderField,\r\n} from \"../../../components/helpers/field\";\r\nimport { ToastNotification } from \"../../../components/helpers/notification\";\r\nimport Tabel from \"../../../components/helpers/tabel\";\r\nimport { getData } from \"../../../config/axios\";\r\nimport ValidasiPindahBarang from \"../../../Validasi/Barang/PindahBarang/ValidasiPindahBarang\";\r\nimport Loading from 'react-fullscreen-loading';\r\nconst maptostate = (state) => {\r\n  return {\r\n    datagudang: state.datamaster.getDataGudang,\r\n    databaki: state.datamaster.getDataBaki,\r\n    setBarangPindah: state.databarang.setBarangPindah,\r\n  };\r\n};\r\nclass HeadPindahBarang extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      date: new Date(),\r\n      isLoadingBatal:false,\r\n      isLoadingBaki: false,\r\n    };\r\n  }\r\n  componentWillUnmount() {}\r\n  componentDidMount() {\r\n    this.props.dispatch(getDataGudang());\r\n    this.props.dispatch(getDataBaki());\r\n    setTimeout(() => {\r\n      // document.getElementById('kode_gudang').p\r\n      this.setState({ kode_gudang: 'TOKO' });\r\n      this.props.change('kode_gudang','TOKO')\r\n    }, 100);\r\n  }\r\n  getKodeBarcode(e) {\r\n    clearTimeout(this.delay)\r\n    this.delay = setTimeout(() => {\r\n      getData(\"barang/open/kode-barcode?kode_barcode=\" + e)\r\n      .then((res) => {\r\n        if (res.data.length === 0) {\r\n          ToastNotification(\"info\", \"Data Yang Dicari Tidak Ada\");\r\n          // return false\r\n        } else {\r\n          let data = JSON.parse(localStorage.getItem(\"data_barang_tmp\")) || [];\r\n          let index = data.findIndex((hasil) => hasil.kode_barcode === e);\r\n          if (index === -1) {\r\n            data.push(res.data[0]);\r\n            localStorage.setItem(\"data_barang_tmp\", JSON.stringify(data));\r\n            this.props.dispatch(setBarangPindah(data));\r\n            this.props.change(\"kode_barcode\", \"\");\r\n          }\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        ToastNotification(\"info\", \"Data Yang Dicari Tidak Ada\");\r\n      });\r\n    }, 1500);\r\n  }\r\n  batalHancur() {\r\n    this.setState({ isLoadingBatal: true })\r\n    setTimeout(() => {\r\n      this.props.dispatch(setBarangPindah([]));\r\n      localStorage.setItem('data_barang_tmp', JSON.stringify([]))\r\n      this.setState({ isLoadingBatal: false })\r\n    }, 500);\r\n  }\r\n  render() {\r\n    return (\r\n      <form onSubmit={this.props.handleSubmit} autoComplete=\"off\"\r\n      onKeyPress={(e) => {\r\n        e.key === \"Enter\" && e.preventDefault();\r\n      }}\r\n      >\r\n        <div className=\"row\">\r\n          <div className=\"col-lg-4\">\r\n            <Field\r\n              id=\"kode_gudang\"\r\n              label=\"Kode Gudang\"\r\n              name=\"kode_gudang\"\r\n              onChange={(e) => {\r\n                this.setState({ kode_gudang: e });\r\n                this.props.change(\"kode_baki\", \"\");\r\n              }}\r\n              options={this.props.datagudang\r\n                .filter((list) => list.kode_gudang !== undefined)\r\n                .map((list) => {\r\n                  let data = {\r\n                    value: list.kode_gudang,\r\n                    name: list.kode_gudang + \" - \" + list.nama_gudang,\r\n                  };\r\n                  return data;\r\n                })}\r\n              placeholder={\"Silahkan Pilih Kode Gudang\"}\r\n              component={ReanderSelect}\r\n            />\r\n          </div>\r\n          <div className=\"col-lg-4\">\r\n            {this.state.isLoadingBaki === false ? (\r\n              <Field\r\n                label=\"Baki Tujuan\"\r\n                name=\"kode_baki\"\r\n                options={this.props.databaki\r\n                  .filter((list) => list.kode_gudang === this.state.kode_gudang)\r\n                  .map((databaki) => {\r\n                    let data = {\r\n                      value: databaki.kode_baki,\r\n                      name: databaki.kode_baki + \" - \" + databaki.nama_baki,\r\n                    };\r\n                    return data || [];\r\n                  })}\r\n                placeholder={\"Silahkan Pilih Baki Tujuan\"}\r\n                component={ReanderSelect}\r\n              />\r\n            ) : (\r\n              <SkeletonLoading label=\"Baki Tujuan\" />\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"col-lg-4\">\r\n            <Field\r\n              onChange={(e) => this.getKodeBarcode(e.target.value)}\r\n              name=\"kode_barcode\"\r\n              component={ReanderField}\r\n              type=\"text\"\r\n              label=\"Kode Barcode\"\r\n              placeholder=\"Masukan Kode Barcode\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <Tabel\r\n          keyField=\"kode_barcode\"\r\n          exportCsv={false}\r\n          pagination=\"off\"\r\n          data={\r\n            this.props.setBarangPindah.length === 0\r\n              ? JSON.parse(localStorage.getItem(\"data_barang_tmp\"))\r\n              : this.props.setBarangPindah\r\n          }\r\n          columns={this.props.columns}\r\n          empty={true}\r\n          textEmpty=\"Data Barang Kosong\"\r\n        />\r\n        <div className=\"row\">\r\n          <div className=\"col-10\">\r\n            <button\r\n              className=\"btn btn-primary\"\r\n              disabled={this.props.submitting}\r\n              type=\"submit\"\r\n            >\r\n              {this.props.isLoading ? (\r\n                <>\r\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Sedang\r\n                  Menyimpan\r\n                </>\r\n              ) : (\r\n                \"Simpan Data\"\r\n              )}\r\n            </button>\r\n            &nbsp;\r\n            <button\r\n              className=\"btn btn-warning\"\r\n              type=\"button\"\r\n              onClick={()=>this.batalHancur()}\r\n              disabled={this.props.isLoadingBatal}\r\n            >\r\n              {this.state.isLoadingBatal ? (\r\n                <>\r\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Sedang\r\n                  Membatal\r\n                </>\r\n              ) : (\r\n                \"Batal\"\r\n              )}\r\n            </button>\r\n          </div>\r\n          {/* <div className=\"2\">\r\n            {JSON.parse(localStorage.getItem(\"data_barang_tmp\")) ===\r\n            null ? null : (\r\n              <>\r\n                Total Barang :{\" \"}\r\n                {this.props.setBarangPindah.length === 0\r\n                  ? JSON.parse(localStorage.getItem(\"data_barang_tmp\"))\r\n                      .length || 0\r\n                  : this.props.setBarangPindah.length || 0}\r\n                <br />\r\n                Total Berat :\r\n                {this.props.setBarangPindah.length === 0\r\n                  ? JSON.parse(localStorage.getItem(\"data_barang_tmp\"))\r\n                      .map((column, key) => column.berat)\r\n                      .reduce((a, b) => a + b, 0)\r\n                      .toFixed(1)\r\n                  : this.props.setBarangPindah\r\n                      .map((column, key) => column.berat)\r\n                      .reduce((a, b) => a + b, 0)\r\n                      .toFixed(1)}\r\n              </>\r\n            )}\r\n          </div> */}\r\n        </div>\r\n        {this.props.isLoading ? (\r\n        <Loading \r\n        loading\r\n        background=\"rgba(0, 0, 0, 0.35)\"\r\n         loaderColor=\"rgba(94, 147, 117, 1)\" />\r\n      ) : null}\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nHeadPindahBarang = reduxForm({\r\n  form: \"HeadPindahBarang\",\r\n  enableReinitialize: true,\r\n  validate: ValidasiPindahBarang,\r\n})(HeadPindahBarang);\r\nexport default connect(maptostate, null)(HeadPindahBarang);\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Panel, PanelHeader } from \"../../../components/panel/panel.jsx\";\r\nimport { connect } from \"react-redux\";\r\nimport HeadPindahBarang from \"./HeadPindahBarang.jsx\";\r\nimport Swal from \"sweetalert2\";\r\nimport { setBarangPindah } from \"../../../actions/databarang_action.jsx\";\r\nimport { postData } from \"../../../config/axios.jsx\";\r\nimport { ToastNotification } from \"../../../components/helpers/notification.jsx\";\r\nconst maptostate = (state) => {\r\n  return {\r\n    setBarangPindah: state.databarang.setBarangPindah,\r\n  };\r\n};\r\n\r\nclass FormPindahBarang extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isEdit: false,\r\n      modalDialog: false,\r\n      isLoading: false,\r\n      columns: [\r\n        {\r\n          dataField: \"kode_barcode\",\r\n          text: \"Kode Barcode\",\r\n          footerAttrs: {\r\n            colSpan: \"5\",\r\n          },\r\n          footer: (cell, row, num, index) => {\r\n            return (\r\n              <div>Total Barang : {this.props.setBarangPindah.length === 0\r\n                ?  JSON.parse(localStorage.getItem(\"data_barang_tmp\")) === null  ? 0 :  JSON.parse(localStorage.getItem(\"data_barang_tmp\"))\r\n                    .length || 0\r\n                : this.props.setBarangPindah.length || 0} </div>\r\n            );\r\n          },\r\n        },\r\n        {\r\n          dataField: \"kode_group\",\r\n          text: \"Gudang Asal\",\r\n        },\r\n        {\r\n          dataField: \"kode_toko\",\r\n          text: \"Baki Asal\",\r\n        },\r\n        {\r\n          dataField: \"nama_barang\",\r\n          text: \"Nama Barang\",\r\n        },\r\n        {\r\n          dataField: \"nama_atribut\",\r\n          text: \"Nama Atribut\",\r\n        },\r\n        {\r\n          dataField: \"berat\",\r\n          text: \"Berat\",\r\n          formatter: (cell) => {\r\n            return cell.toFixed(3);\r\n          },\r\n          footer: (columnData) =>\r\n            columnData.reduce((acc, item) => acc + item, 0).toFixed(3),\r\n        },\r\n\r\n        {\r\n          dataField: \"action\",\r\n          text: \"Action\",\r\n          csvExport: false,\r\n          headerClasses: \"text-center\",\r\n          formatter: (rowcontent, row,index) => {\r\n            return (\r\n              <div className=\"row text-center\">\r\n                <div className=\"col-12\">\r\n                  <button type=\"button\" onClick={()=>this.hapusdata(index)} className=\"btn btn-danger mr-3\">\r\n                    <i className=\"fa fa-trash\"></i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            );\r\n          },\r\n          footer : \"\"\r\n        },\r\n      ],\r\n    };\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n  hapusdata(id) {\r\n    Swal.fire({\r\n      title: \"Anda Yakin !!\",\r\n      text: \"Ingin Menghapus Data Ini ?\",\r\n      icon: \"warning\",\r\n      position: \"top-center\",\r\n      cancelButtonText: \"Tidak\",\r\n      showCancelButton: true,\r\n      confirmButtonText: \"OK\",\r\n      showConfirmButton: true,\r\n    }).then((result) => {\r\n      if (result.isConfirmed) {\r\n        let data = JSON.parse(localStorage.getItem('data_barang_tmp'));\r\n        data.splice(id, 1)\r\n        localStorage.setItem('data_barang_tmp', JSON.stringify(data));\r\n        this.props.dispatch(setBarangPindah(data));\r\n        // deleteLocalItemBarcode(\"data_barang_tmp\", id);\r\n        // this.props.dispatch(getListReturnSupplier());\r\n      }\r\n    });\r\n  }\r\n  componentDidMount() {\r\n    this.props.dispatch(setBarangPindah([]));\r\n    // this.props.dispatch(getDataBaki());\r\n    // localStorageencryp('data_barang',[])\r\n    localStorage.setItem('data_barang_tmp',\"[]\")\r\n    // console.log(JSON.parse(localStorage.getItem('data_barang_tmp')));\r\n  }\r\n  handleSubmit(data) {\r\n    this.setState({ isLoading: true });\r\n    let barang_tmp = this.props.setBarangPindah.length === 0 ? JSON.parse(localStorage.getItem('data_barang_tmp')) : this.props.setBarangPindah \r\n    let hasil = {\r\n      kode_gudang: data.kode_gudang,\r\n      kode_toko: data.kode_baki,\r\n      detail_barang: barang_tmp\r\n    }\r\n    postData('pindahbarang/addsatuan', hasil)\r\n    .then(() => {\r\n      this.setState({ isLoading: false });\r\n    }).then(() => {\r\n      localStorage.setItem('data_barang_tmp', JSON.stringify([]));\r\n    })\r\n    .then(() => {\r\n      this.props.dispatch(setBarangPindah([]));\r\n    })\r\n    .then(() => {\r\n      ToastNotification(\"success\", \"Data Berhasil Disimpan\");\r\n    }).catch((error) => this.errorhandling(error))\r\n  }\r\n  errorhandling(error) {\r\n    // NotifError(error.response.data)\r\n    ToastNotification(\"info\", /conflict/i.test(error.response.data) ? \"Terjadi Kesalahan Saat Mengirim Data\" : error.response.data);\r\n    this.setState({ isLoading: false });\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <ol className=\"breadcrumb float-xl-right\">\r\n          <li className=\"breadcrumb-item\">\r\n            <Link to=\"#\">Barang</Link>\r\n          </li>\r\n          <li className=\"breadcrumb-item active\">Pindah Barang</li>\r\n        </ol>\r\n        <h1 className=\"page-header\">Pindah Barang </h1>\r\n        <Panel>\r\n          <PanelHeader>Pindah Barang</PanelHeader>\r\n          <br />\r\n\r\n          {/* Pindah Barang */}\r\n          <div className=\"container\">\r\n            <HeadPindahBarang\r\n              isLoading={this.state.isLoading}\r\n              onSubmit={(data) => this.handleSubmit(data)}\r\n              data={this.props.setBarangPindah}\r\n              columns={this.state.columns}\r\n            />\r\n          </div>\r\n          <br />\r\n          {/* End Pindah Barang */}\r\n\r\n          {/* End Tambah Pindah Barang  */}\r\n        </Panel>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(maptostate, null)(FormPindahBarang);\r\n","const ValidasiPindahBarang = (value) => {\r\n    const errors = {};\r\n    if (!value.kode_gudang) {\r\n        errors.kode_gudang = \"Kode Gudang Tidak Boleh Kosong\";\r\n    }\r\n    if (!value.kode_baki) {\r\n        errors.kode_baki = \"Nama Baki Tidak Boleh Kosong\";\r\n    }\r\n\r\n    if (!value.statusAktif) {\r\n        errors.statusAktif = \"Status Tidak Boleh Kosong\";\r\n    }\r\n\r\n    return errors;\r\n}\r\nexport default ValidasiPindahBarang;\r\n\r\n\r\n"],"sourceRoot":""}