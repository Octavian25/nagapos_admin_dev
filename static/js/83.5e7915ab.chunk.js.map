{"version":3,"sources":["pages/auth/login.jsx","assets/img/login-bg/backround-kresno.png"],"names":["FormLogin","lazy","Promise","all","__webpack_require__","e","then","bind","Login","props","_this","Object","C_Users_Octavian_OneDrive_Documents_GitHub_nagapos_admin_master_repo_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","_super","call","state","date","getDate","Date","toDateString","setState","isLoading","_this2","setItem","process","localStorage","JSON","stringify","window","location","href","localStoragedecryp","getToday","history","push","pushState","document","title","addEventListener","event","context","handleSetPageSidebar","handleSetPageHeader","handleSetBodyWhiteBg","getData","res","row","alamat_toko","data","nama_toko","catch","err","console","log","Swal","fire","text","undefined","response","icon","_this3","hasil","user_id","password","postData","resposn","localStorageencryp","token","getElementById","value","getData2","filter","list","ToastNotification","onfiled","element","createElement","file","Blob","type","URL","createObjectURL","download","body","appendChild","click","_this4","react__WEBPACK_IMPORTED_MODULE_4___default","a","className","style","backgroundImage","concat","require","display","id","rows","cols","onSubmit","React","Component","contextType","PageSettings","withRouter","module","exports","p"],"mappings":"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","file":"static/js/83.5e7915ab.chunk.js","sourcesContent":["import React, { lazy } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport Swal from \"sweetalert2\";\r\nimport {\r\n  getToday,\r\n  localStoragedecryp,\r\n  localStorageencryp,\r\n  setItem,\r\n} from \"../../components/helpers/function.jsx\";\r\nimport { ToastNotification } from \"../../components/helpers/notification.jsx\";\r\nimport { getData, getData2, postData } from \"../../config/axios.jsx\";\r\nimport { PageSettings } from \"../../config/page-settings.js\";\r\nconst FormLogin = lazy(() => import(\"./FormLogin.jsx\"));\r\n// const Address = process.env.REACT_APP_ADDRESS;\r\n\r\nclass Login extends React.Component {\r\n  static contextType = PageSettings;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isLoading: false,\r\n      // isLogin: false,\r\n      // alamat : \"\"\r\n    };\r\n  }\r\n\r\n  state = {\r\n    date: \"\",\r\n  };\r\n\r\n  getDate = () => {\r\n    var date = new Date().toDateString();\r\n    this.setState({ date });\r\n  };\r\n\r\n  componentDidMount() {\r\n    const server = process.env.REACT_APP_BACKEND_URL;\r\n    setItem('url',server)\r\n    localStorage.setItem('base_url',JSON.stringify(window.location.href))\r\n    const isAuthenticated = localStoragedecryp(\"islogin\");\r\n    if (isAuthenticated === getToday()) {\r\n      this.props.history.push(\"/dashboard\");\r\n    }\r\n    window.history.pushState(null, document.title, window.location.href);\r\n    window.addEventListener(\"popstate\", function (event) {\r\n      window.history.pushState(null, document.title, window.location.href);\r\n    });\r\n\r\n    this.context.handleSetPageSidebar(false);\r\n    this.context.handleSetPageHeader(false);\r\n    this.context.handleSetBodyWhiteBg(true);\r\n    this.getDate();\r\n    // console.log(encryptascii('sa'));\r\n    // console.log(decryptascii('BF95'));\r\n    getData('system/get').then((res) => {\r\n      // console.log(res.data[0].alamat_toko);\r\n      let row = {\r\n        alamat_toko : res.data[0].alamat_toko,\r\n        nama_toko : res.data[0].nama_toko\r\n      }\r\n      setItem('data_toko', row)\r\n      \r\n      this.setState({\r\n        alamat_toko : res.data[0].alamat_toko,\r\n        nama_toko : res.data[0].nama_toko\r\n      })\r\n    }).catch((err) => {\r\n      this.setState({\r\n        alamat_toko : \"\",\r\n        nama_toko : \"\"\r\n      })\r\n    })\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.context.handleSetPageSidebar(true);\r\n    this.context.handleSetPageHeader(true);\r\n    this.context.handleSetBodyWhiteBg(false);\r\n  }\r\n\r\n  onfiled(err) {\r\n    // NotifError(err)\r\n    console.log(err);\r\n    Swal.fire({\r\n      title: \"Oopss !!!\",\r\n      text: err.response === undefined ? 'Terjadi Kesalahan Saat Request Data' : err.response.data,\r\n      icon: \"info\",\r\n    });\r\n    this.setState({ isLoading: false });\r\n  }\r\n  onSubmit(data) {\r\n    let hasil = {\r\n      user_id: data.user_id,\r\n      password: data.password,\r\n    };\r\n    this.setState({ isLoading: true });\r\n    postData(\"users/login\", hasil)\r\n      .then((resposn) => {\r\n        localStorageencryp(\"userdata\", JSON.stringify(resposn.data));\r\n        localStorageencryp(\"token\", resposn.data.token);\r\n        localStorageencryp(\"islogin\", getToday());\r\n        document.getElementById(\"logindata\").value = data.user_id;\r\n        getData2('para-system/type/module').then((res)=>{\r\n          // console.log(res);\r\n          setItem('module',(res.data.filter((list)=> list.value === 'true')))\r\n        })\r\n      }).then(() => {\r\n        // this.TextFilenotapesanan()\r\n        getData('akses-user/id/'+data.user_id).then((res) => {\r\n          localStorage.setItem('menu',JSON.stringify(res.data))\r\n        }).catch((err) => {\r\n          ToastNotification(\"info\",err.response.data)\r\n        })\r\n      })\r\n      .then(() => this.props.history.push(\"/dashboard\"))\r\n      .catch((err) => this.onfiled(err));\r\n  }\r\n\r\n TextFilenotapesanan() {\r\n    const element = document.createElement(\"a\");\r\n    const file = new Blob([document.getElementById(\"logindata\").value], {\r\n      type: \"text/plain;charset=utf-8\",\r\n    });\r\n    element.href = URL.createObjectURL(file);\r\n    element.download = \"timbangan.txt\";\r\n    document.body.appendChild(element);\r\n    element.click();\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"login login-with-news-feed\">\r\n         \r\n        <div className=\"news-feed\">\r\n          <div\r\n            className=\"news-image\"\r\n            style={{\r\n              backgroundImage: `url(${require(\"../../assets/img/login-bg/backround-kresno.png\")})`,\r\n            }}\r\n          ></div>\r\n          <div className=\"news-caption text-center\">\r\n          <textarea\r\n            style={{ display: \"none\" }}\r\n            id=\"logindata\"\r\n            rows=\"100\"\r\n            cols=\"100\"\r\n          />\r\n            {/* <h4 className=\"caption-title\">\r\n              <b>Toko</b> Mas Kresno\r\n            </h4> */}\r\n            <p>\r\n            {this.state.alamat_toko}\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <div className=\"right-content\">\r\n          <FormLogin\r\n            isLoading={this.state.isLoading}\r\n            nama_toko = {this.state.nama_toko}\r\n            onSubmit={(data) => this.onSubmit(data)}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(Login);","module.exports = __webpack_public_path__ + \"static/media/backround-kresno.57bcbf16.png\";"],"sourceRoot":""}