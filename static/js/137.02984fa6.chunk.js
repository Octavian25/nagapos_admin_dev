(window.webpackJsonp=window.webpackJsonp||[]).push([[137],{1245:function(e,a,t){"use strict";t.r(a);var n=t(19),o=t(20),r=t(33),l=t(22),i=t(21),c=t(0),s=t.n(c),m=t(58),b=t(28),d=t(64),u=t(312),p=t(9),g=t(213),k=t(36),h=t(123),_=t(13),f=function(e){Object(l.a)(t,e);var a=Object(i.a)(t);function t(e){var o;return Object(n.a)(this,t),(o=a.call(this,e)).state={},o}return Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()},autoComplete:"off"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-4"},s.a.createElement("button",{className:"btn btn-primary btn-block",type:"button",onClick:this.props.btnKosongkanDataOpname},"Kosongkan Data Opname")),s.a.createElement("div",{className:"col-4"},s.a.createElement("button",{onClick:this.props.lanjutOpname,className:"btn btn-primary btn-block",type:"button"},"Lanjut Opname")),s.a.createElement("div",{className:"col-4"},s.a.createElement("button",{className:"btn btn-primary btn-block",onClick:this.props.lihatstockopname,disabled:this.props.loadingLihatSTockOpname,type:"button"},this.props.loadingLihatSTockOpname?s.a.createElement(s.a.Fragment,null,s.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Lihat Hasil Opname"):"Lihat Hasil Opname"))))}}]),t}(c.Component);f=Object(u.a)({form:"HeadStockOpname",enableReinitialize:!0})(f);var O=Object(m.b)()(f),E=t(311),v=t(78),y=function(e){var a={};return e.baki_opname||(a.baki_opname="Kode Baki Tidak Boleh Kosong"),a},S=function(e){Object(l.a)(t,e);var a=Object(i.a)(t);function t(e){var o;return Object(n.a)(this,t),(o=a.call(this,e)).state={batal:!1,isLoadingKosongkanBaki:!1},o}return Object(o.a)(t,[{key:"batal",value:function(){this.props.dispatch(Object(p.lc)())}},{key:"componentDidMount",value:function(){this.props.dispatch(Object(p.Fb)())}},{key:"render",value:function(){var e=this;return s.a.createElement("form",{onSubmit:this.props.handleSubmit,onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()},autoComplete:"off"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-12"},s.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(){return e.props.kosongkanDataBaki()},disabled:this.state.isLoadingKosongkanBaki,type:"button"},this.state.isLoadingKosongkanBaki?s.a.createElement(s.a.Fragment,null,s.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Kosongkan Data Opname"):"Kosongkan Data Opname"),s.a.createElement("br",null)),s.a.createElement("div",{className:"col-12"},s.a.createElement(E.a,{name:"baki_opname",label:"Baki Opname",placeholder:"Pilih Baki Opname",options:this.props.getDataBaki.filter(function(e){return void 0!==e.kode_baki}).map(function(e){return{value:e.kode_baki,name:e.kode_baki+" - "+e.nama_baki}}),component:v.f})),s.a.createElement("div",{className:"col-12"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-6"},s.a.createElement("button",{className:"btn btn-primary btn-block",disabled:this.props.isLoadingBakiOpname,type:"submit"},this.props.isLoadingBakiOpname?s.a.createElement(s.a.Fragment,null,s.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Opname"):"Opname")),s.a.createElement("div",{className:"col-6"},s.a.createElement("button",{className:"btn btn-primary btn-block",disabled:this.state.batal,type:"button",onClick:function(){return e.batal()}},this.state.batal?s.a.createElement(s.a.Fragment,null,s.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Batal"):"Batal"))))))}}]),t}(c.Component);S=Object(u.a)({form:"KosongKanDataOpname",enableReinitialize:!0,validate:y})(S);var j=Object(m.b)(function(e){return{getDataBaki:e.datamaster.getDataBaki}})(S),N=t(12),K=function(e){Object(l.a)(t,e);var a=Object(i.a)(t);function t(e){var o;return Object(n.a)(this,t),(o=a.call(this,e)).state={loadingData:!1},o}return Object(o.a)(t,[{key:"componentDidMount",value:function(){setTimeout(function(){document.getElementById("kode_barcode").focus()},100)}},{key:"cekBarcode",value:function(e){var a=this;clearTimeout(this.delayTimer),this.delayTimer=setTimeout(function(){if(a.setState({loadingData:!0}),""===e)return a.setState({loadingData:!1,databarang:[]}),!1;var t={kode_barcode:e};Object(_.j)("opname/add",t).then(function(e){Object(k.e)("success","Data Berhasil Ditambahkan"),console.log(e.data),a.setState({loadingData:!1}),e.data.barang.forEach(function(e,t){a.props.change("kode_toko",e.kode_toko),a.props.change("kode_dept",e.kode_dept),a.props.change("nama_barang",e.nama_barang),a.props.change("nama_atribut",e.nama_atribut),a.props.change("kode_intern",e.kode_intern),a.props.change("berat",e.berat)}),a.props.change("kode_barcode",""),document.getElementById("kode_barcode").focus()}).catch(function(e){a.setState({loadingData:!1}),a.props.change("kode_toko",""),a.props.change("kode_dept",""),a.props.change("nama_barang",""),a.props.change("nama_atribut",""),a.props.change("kode_intetn",""),a.props.change("berat",""),Object(k.e)("info",e.response.data),a.props.change("kode_barcode",""),document.getElementById("kode_barcode").focus()})},300)}},{key:"batal",value:function(){this.props.dispatch(Object(p.lc)())}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-12"},s.a.createElement(E.a,{id:"kode_barcode",name:"kode_barcode",onChange:function(a){return e.cekBarcode(a.target.value)},label:"Kode Barcode",type:"text",normalize:function(e){return e.replace(/[^\d]/g,"")},placeholder:"Silahkan Masukan Kode Barcode",component:v.e,maxLength:"8"})),s.a.createElement("div",{className:"col-6"},s.a.createElement(E.a,{name:"kode_toko",label:"Kode Baki",type:"text",readOnly:!0,placeholder:"Silahkan Masukan Kode Baki",component:v.e})),s.a.createElement("div",{className:"col-6"},s.a.createElement(E.a,{name:"kode_dept",type:"text",readOnly:!0,label:"Kode Jenis",placeholder:"Silahkan Masukan Kode Jenis",component:v.e})),s.a.createElement("div",{className:"col-6"},s.a.createElement(E.a,{name:"kode_intern",type:"text",readOnly:!0,label:"Kode Intern",placeholder:"Silahkan Masukan Kode Intern",component:v.e})),s.a.createElement("div",{className:"col-6"},s.a.createElement(E.a,{name:"berat",type:"text",readOnly:!0,label:"Berat",placeholder:"Silahkan Masukan Berat",component:v.e})),s.a.createElement("div",{className:"col-6"},s.a.createElement(E.a,{name:"nama_barang",readOnly:!0,type:"text",label:"Nama Barang",placeholder:"Silahkan Masukan Nama Barang",component:v.e})),s.a.createElement("div",{className:"col-6"},s.a.createElement(E.a,{readOnly:!0,type:"text",name:"nama_atribut",label:"Nama Atribut",placeholder:"Silahkan Masukan Nama Atribut",component:v.e})),s.a.createElement("div",{className:"col-12"},s.a.createElement("button",{className:"btn btn-primary btn-block",disabled:this.state.batal,type:"button",onClick:function(){return e.batal()}},"Kembali")),this.state.loadingData?s.a.createElement(s.a.Fragment,null,s.a.createElement(N.h,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"})):null)}}]),t}(c.Component);K=Object(u.a)({form:"ProsesOpname",enableReinitialize:!0})(K);var B=Object(m.b)()(K),D=t(211),F=function(e){Object(l.a)(t,e);var a=Object(i.a)(t);function t(e){var o;return Object(n.a)(this,t),(o=a.call(this,e)).state={},o}return Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement(D.a,{keyField:"kode_barcode",data:this.props.data,columns:this.props.tbl_barang_tidak_ketemu,empty:!0,textEmpty:"Data Barang Kosong"})}}]),t}(c.Component);F=Object(u.a)({form:"TabelLihatBarangTidakKetemu",enableReinitialize:!0})(F);var L=Object(m.b)()(F),x=function(e){Object(l.a)(t,e);var a=Object(i.a)(t);function t(e){var o;return Object(n.a)(this,t),(o=a.call(this,e)).state={},o}return Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement(D.a,{keyField:"kode_barcode",data:this.props.data,columns:this.props.tbl_barang_ketemu,empty:!0,textEmpty:"Data Barang Kosong"})}}]),t}(c.Component);x=Object(u.a)({form:"TabelListBarangKetemu",enableReinitialize:!0})(x);var I=Object(m.b)()(x),T=function(e){Object(l.a)(t,e);var a=Object(i.a)(t);function t(e){var o;return Object(n.a)(this,t),(o=a.call(this,e)).state={isLoading:!1,FormModal:"",barangHilang:[],barangKetemu:[],isLoadingBakiOpname:!1,loadingLihatSTockOpname:!1,tbl_barang_tidak_ketemu:[{dataField:"kode_toko",text:"Kode Baki ",footer:"",footerAttrs:{colSpan:"3"}},{dataField:"kode_barcode",text:"Kode Barcode"},{dataField:"kode_group",text:"Kategori"},{dataField:"kode_dept",text:"Kode Jenis",footer:"Total Qty"},{dataField:"nama_barang",text:"Nama Barang",footer:function(e,a){return null===localStorage.getItem("total_qty_brg_hilang")?0:parseInt(localStorage.getItem("total_qty_brg_hilang"))}},{dataField:"nama_atribut",text:"Nama Atribut",footer:"Total Berat"},{dataField:"berat",text:"Berat",footer:function(e,a){return null===localStorage.getItem("total_berat_brg_hilang")?0:parseFloat(localStorage.getItem("total_berat_brg_hilang")).toFixed(3)}}],tbl_barang_ketemu:[{dataField:"kode_toko",text:"Kode Baki ",footer:"",footerAttrs:{colSpan:"3"}},{dataField:"kode_barcode",text:"Kode Barcode"},{dataField:"kode_group",text:"Kategori"},{dataField:"kode_dept",text:"Kode Jenis",footer:"Total Qty"},{dataField:"nama_barang",text:"Nama Barang",footer:function(e,a){return null===localStorage.getItem("total_qty_brg_ketemu")?0:parseInt(localStorage.getItem("total_qty_brg_ketemu"))}},{dataField:"nama_atribut",text:"Nama Atribut",footer:"Total Berat"},{dataField:"berat",text:"Berat",footer:function(e,a){return null===localStorage.getItem("total_berat_brg_ketemu")?0:parseFloat(localStorage.getItem("total_berat_brg_ketemu")).toFixed(3)}}]},o.btnOpname=o.btnOpname.bind(Object(r.a)(o)),o}return Object(o.a)(t,[{key:"componentDidMount",value:function(){localStorage.setItem("total_berat_brg_ketemu",0),localStorage.setItem("total_berat_brg_hilang",0),localStorage.setItem("total_qty_brg_ketemu",0),localStorage.setItem("total_qty_brg_hilang",0)}},{key:"componentWillUnmount",value:function(){localStorage.setItem("total_berat_brg_ketemu",0),localStorage.setItem("total_berat_brg_hilang",0),localStorage.setItem("total_qty_brg_ketemu",0),localStorage.setItem("total_qty_brg_hilang",0)}},{key:"btnOpname",value:function(e){var a=this;this.setState({isLoadingBakiOpname:!0});var t={kode_baki:e.baki_opname};Object(_.j)("opname/by-kode-baki/",t).then(function(e){Object(k.e)("success",e.data.message),a.props.dispatch(Object(d.d)("KosongKanDataOpname"))}).then(function(){a.setState({isLoadingBakiOpname:!1}),a.props.dispatch(Object(p.lc)()),a.lihatstockopname()}).catch(function(e){a.setState({isLoadingBakiOpname:!1}),Object(k.e)("info",void 0===e.response?"Terjadi Kesalahan Saat Request Data":e.response.data)})}},{key:"btnKosongkanDataOpname",value:function(){this.props.dispatch(Object(p.nc)()),this.setState({FormModal:"KOSONGKANOPNAME"})}},{key:"lanjutOpname",value:function(){this.props.dispatch(Object(p.nc)()),this.setState({FormModal:"LANJUTOPNAME"})}},{key:"lihatstockopname",value:function(){var e=this;this.setState({loadingLihatSTockOpname:!0}),Object(_.d)("opname/get/hasil").then(function(a){e.setState({loadingLihatSTockOpname:!1}),a.data.forEach(function(a){var t=a.barang_ketemu.map(function(e){return e.berat}).reduce(function(e,a){return e+a},0),n=a.barang_hilang.map(function(e){return e.berat}).reduce(function(e,a){return e+a},0);localStorage.setItem("total_berat_brg_ketemu",JSON.stringify(t)),localStorage.setItem("total_berat_brg_hilang",JSON.stringify(n)),localStorage.setItem("total_qty_brg_ketemu",JSON.stringify(a.barang_ketemu.length)),localStorage.setItem("total_qty_brg_hilang",JSON.stringify(a.barang_hilang.length)),e.setState({barangKetemu:a.barang_ketemu,barangHilang:a.barang_hilang})})}).catch(function(a){e.setState({loadingLihatSTockOpname:!1}),Object(k.e)("info",void 0===a.response?"Terjadi Kesalahan Saat Request Data":a.response.data)})}},{key:"kosongkanDataBaki",value:function(){var e=this;Object(_.b)("opname/kosongkan").then(function(a){Object(k.e)("success",a.data.message),e.setState({barangKetemu:[],barangHilang:[]})}).catch(function(e){Object(k.e)("info","Terjadi Kesalahan Saat Mengirim Data")})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("ol",{className:"breadcrumb float-xl-right"},s.a.createElement("li",{className:"breadcrumb-item"},s.a.createElement(b.b,{to:"#"},"Stock Opname")),s.a.createElement("li",{className:"breadcrumb-item active"},"Stock Opname")),s.a.createElement("h1",{className:"page-header"},"Stock Opname "),s.a.createElement(h.a,null,s.a.createElement(h.c,null,"Stock Opname"),s.a.createElement("br",null),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-12"},s.a.createElement(O,{loadingLihatSTockOpname:this.state.loadingLihatSTockOpname,lihatstockopname:function(){return e.lihatstockopname()},lanjutOpname:function(){return e.lanjutOpname()},btnKosongkanDataOpname:function(){return e.btnKosongkanDataOpname()}})),s.a.createElement("div",{className:"col-12"},s.a.createElement("br",null),s.a.createElement("hr",null),"List Barang Tidak Ketemu",s.a.createElement("hr",null),s.a.createElement(L,{data:this.state.barangHilang,tbl_barang_tidak_ketemu:this.state.tbl_barang_tidak_ketemu})),s.a.createElement("div",{className:"col-12"},s.a.createElement("hr",null),"List Barang Ketemu",s.a.createElement("hr",null),s.a.createElement(I,{data:this.state.barangKetemu,tbl_barang_ketemu:this.state.tbl_barang_ketemu})))),s.a.createElement("br",null),s.a.createElement(g.a,{size:"L",title:"KOSONGKANOPNAME"===this.state.FormModal?"Form Kosongkan Opname":"Proses Opname",content:"KOSONGKANOPNAME"===this.state.FormModal?s.a.createElement(j,{isLoadingBakiOpname:this.state.isLoadingBakiOpname,kosongkanDataBaki:function(a){return e.kosongkanDataBaki(a)},onSubmit:function(a){return e.btnOpname(a)}}):s.a.createElement(B,null)})))}}]),t}(s.a.Component);T=Object(u.a)({form:"FormStockOpname",enableReinitialize:!0})(T);a.default=Object(m.b)()(T)}}]);
//# sourceMappingURL=137.02984fa6.chunk.js.map