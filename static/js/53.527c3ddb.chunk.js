(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{1319:function(a,e,t){"use strict";t.r(e);var n=t(19),i=t(20),o=t(33),r=t(22),s=t(21),d=t(0),l=t.n(d),c=t(28),u=t(123),g=t(58),m=t(311),p=t(312),b=t(42),h=t(9),f=t(78),k=t(36),_=t(211),v=t(13),B=t(764),S=t(210),E=t.n(S),O=function(a){Object(r.a)(t,a);var e=Object(s.a)(t);function t(a){var i;return Object(n.a)(this,t),(i=e.call(this,a)).state={date:new Date,isLoadingBatal:!1,isLoadingBaki:!1},i}return Object(i.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"componentDidMount",value:function(){var a=this;this.props.dispatch(Object(h.Lb)()),this.props.dispatch(Object(h.Fb)()),setTimeout(function(){a.setState({kode_gudang:"TOKO"}),a.props.change("kode_gudang","TOKO")},100)}},{key:"getKodeBarcode",value:function(a){var e=this;clearTimeout(this.delay),this.delay=setTimeout(function(){Object(v.d)("barang/open/kode-barcode?kode_barcode="+a).then(function(t){if(0===t.data.length)Object(k.e)("info","Data Yang Dicari Tidak Ada");else{var n=JSON.parse(localStorage.getItem("data_barang_tmp"))||[];-1===n.findIndex(function(e){return e.kode_barcode===a})&&(n.push(t.data[0]),localStorage.setItem("data_barang_tmp",JSON.stringify(n)),e.props.dispatch(Object(b.r)(n)),e.props.change("kode_barcode",""))}}).catch(function(a){Object(k.e)("info","Data Yang Dicari Tidak Ada")})},1500)}},{key:"batalHancur",value:function(){var a=this;this.setState({isLoadingBatal:!0}),setTimeout(function(){a.props.dispatch(Object(b.r)([])),localStorage.setItem("data_barang_tmp",JSON.stringify([])),a.setState({isLoadingBatal:!1})},500)}},{key:"render",value:function(){var a=this;return l.a.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off",onKeyPress:function(a){"Enter"===a.key&&a.preventDefault()}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-4"},l.a.createElement(m.a,{id:"kode_gudang",label:"Kode Gudang",name:"kode_gudang",onChange:function(e){a.setState({kode_gudang:e}),a.props.change("kode_baki","")},options:this.props.datagudang.filter(function(a){return void 0!==a.kode_gudang}).map(function(a){return{value:a.kode_gudang,name:a.kode_gudang+" - "+a.nama_gudang}}),placeholder:"Silahkan Pilih Kode Gudang",component:f.f})),l.a.createElement("div",{className:"col-lg-4"},!1===this.state.isLoadingBaki?l.a.createElement(m.a,{label:"Baki Tujuan",name:"kode_baki",options:this.props.databaki.filter(function(e){return e.kode_gudang===a.state.kode_gudang}).map(function(a){return{value:a.kode_baki,name:a.kode_baki+" - "+a.nama_baki}||[]}),placeholder:"Silahkan Pilih Baki Tujuan",component:f.f}):l.a.createElement(f.g,{label:"Baki Tujuan"})),l.a.createElement("div",{className:"col-lg-4"},l.a.createElement(m.a,{onChange:function(e){return a.getKodeBarcode(e.target.value)},name:"kode_barcode",component:f.e,type:"text",label:"Kode Barcode",placeholder:"Masukan Kode Barcode"}))),l.a.createElement(_.a,{keyField:"kode_barcode",exportCsv:!1,pagination:"off",data:0===this.props.setBarangPindah.length?JSON.parse(localStorage.getItem("data_barang_tmp")):this.props.setBarangPindah,columns:this.props.columns,empty:!0,textEmpty:"Data Barang Kosong"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-10"},l.a.createElement("button",{className:"btn btn-primary",disabled:this.props.submitting,type:"submit"},this.props.isLoading?l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Menyimpan"):"Simpan Data"),"\xa0",l.a.createElement("button",{className:"btn btn-warning",type:"button",onClick:function(){return a.batalHancur()},disabled:this.props.isLoadingBatal},this.state.isLoadingBatal?l.a.createElement(l.a.Fragment,null,l.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Membatal"):"Batal"))),this.props.isLoading?l.a.createElement(E.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}]),t}(d.Component);O=Object(p.a)({form:"HeadPindahBarang",enableReinitialize:!0,validate:B.a})(O);var N=Object(g.b)(function(a){return{datagudang:a.datamaster.getDataGudang,databaki:a.datamaster.getDataBaki,setBarangPindah:a.databarang.setBarangPindah}},null)(O),j=t(27),y=t.n(j),x=function(a){Object(r.a)(t,a);var e=Object(s.a)(t);function t(a){var i;return Object(n.a)(this,t),(i=e.call(this,a)).state={isEdit:!1,modalDialog:!1,isLoading:!1,columns:[{dataField:"kode_barcode",text:"Kode Barcode",footerAttrs:{colSpan:"5"},footer:function(a,e,t,n){return l.a.createElement("div",null,"Total Barang : ",0===i.props.setBarangPindah.length?null===JSON.parse(localStorage.getItem("data_barang_tmp"))?0:JSON.parse(localStorage.getItem("data_barang_tmp")).length||0:i.props.setBarangPindah.length||0," ")}},{dataField:"kode_group",text:"Gudang Asal"},{dataField:"kode_toko",text:"Baki Asal"},{dataField:"nama_barang",text:"Nama Barang"},{dataField:"nama_atribut",text:"Nama Atribut"},{dataField:"berat",text:"Berat",formatter:function(a){return a.toFixed(3)},footer:function(a){return a.reduce(function(a,e){return a+e},0).toFixed(3)}},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:function(a,e,t){return l.a.createElement("div",{className:"row text-center"},l.a.createElement("div",{className:"col-12"},l.a.createElement("button",{type:"button",onClick:function(){return i.hapusdata(t)},className:"btn btn-danger mr-3"},l.a.createElement("i",{className:"fa fa-trash"}))))},footer:""}]},i.handleSubmit=i.handleSubmit.bind(Object(o.a)(i)),i}return Object(i.a)(t,[{key:"hapusdata",value:function(a){var e=this;y.a.fire({title:"Anda Yakin !!",text:"Ingin Menghapus Data Ini ?",icon:"warning",position:"top-center",cancelButtonText:"Tidak",showCancelButton:!0,confirmButtonText:"OK",showConfirmButton:!0}).then(function(t){if(t.isConfirmed){var n=JSON.parse(localStorage.getItem("data_barang_tmp"));n.splice(a,1),localStorage.setItem("data_barang_tmp",JSON.stringify(n)),e.props.dispatch(Object(b.r)(n))}})}},{key:"componentDidMount",value:function(){this.props.dispatch(Object(b.r)([])),localStorage.setItem("data_barang_tmp","[]")}},{key:"handleSubmit",value:function(a){var e=this;this.setState({isLoading:!0});var t=0===this.props.setBarangPindah.length?JSON.parse(localStorage.getItem("data_barang_tmp")):this.props.setBarangPindah,n={kode_gudang:a.kode_gudang,kode_toko:a.kode_baki,detail_barang:t};Object(v.j)("pindahbarang/addsatuan",n).then(function(){e.setState({isLoading:!1})}).then(function(){localStorage.setItem("data_barang_tmp",JSON.stringify([]))}).then(function(){e.props.dispatch(Object(b.r)([]))}).then(function(){Object(k.e)("success","Data Berhasil Disimpan")}).catch(function(a){return e.errorhandling(a)})}},{key:"errorhandling",value:function(a){Object(k.e)("info",/conflict/i.test(a.response.data)?"Terjadi Kesalahan Saat Mengirim Data":a.response.data),this.setState({isLoading:!1})}},{key:"render",value:function(){var a=this;return l.a.createElement("div",null,l.a.createElement("ol",{className:"breadcrumb float-xl-right"},l.a.createElement("li",{className:"breadcrumb-item"},l.a.createElement(c.b,{to:"#"},"Barang")),l.a.createElement("li",{className:"breadcrumb-item active"},"Pindah Barang")),l.a.createElement("h1",{className:"page-header"},"Pindah Barang "),l.a.createElement(u.a,null,l.a.createElement(u.c,null,"Pindah Barang"),l.a.createElement("br",null),l.a.createElement("div",{className:"container"},l.a.createElement(N,{isLoading:this.state.isLoading,onSubmit:function(e){return a.handleSubmit(e)},data:this.props.setBarangPindah,columns:this.state.columns})),l.a.createElement("br",null)))}}]),t}(l.a.Component);e.default=Object(g.b)(function(a){return{setBarangPindah:a.databarang.setBarangPindah}},null)(x)},764:function(a,e,t){"use strict";e.a=function(a){var e={};return a.kode_gudang||(e.kode_gudang="Kode Gudang Tidak Boleh Kosong"),a.kode_baki||(e.kode_baki="Nama Baki Tidak Boleh Kosong"),a.statusAktif||(e.statusAktif="Status Tidak Boleh Kosong"),e}}}]);
//# sourceMappingURL=53.527c3ddb.chunk.js.map