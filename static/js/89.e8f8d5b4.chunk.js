(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{1321:function(a,t,e){"use strict";e.r(t);var n=e(19),r=e(20),o=e(33),i=e(22),d=e(21),s=e(12),c=e(792),l=e(13),b=e(42),_=e(0),u=e.n(_),m=e(58),k=e(312),p=function(a){Object(i.a)(e,a);var t=Object(d.a)(e);function e(a){var r;return Object(n.a)(this,e),(r=t.call(this,a)).state={},r}return Object(r.a)(e,[{key:"componentDidMount",value:function(){setTimeout(function(){document.getElementById("nomor_pesanan").focus()},100)}},{key:"render",value:function(){var a=this;return u.a.createElement(u.a.Fragment,null,u.a.createElement("label",{htmlFor:""},"Masukan Nomor Pesanan"),u.a.createElement("div",{className:"input-group mb-3"},u.a.createElement("input",{type:"text",id:"nomor_pesanan",className:"form-control",placeholder:"Nomor Pesanan","aria-label":"Nomor Pesanan","aria-describedby":"basic-addon2"}),u.a.createElement("div",{className:"input-group-append"},u.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:function(){return a.props.getNomorPesanan(document.getElementById("nomor_pesanan"))}},this.props.isLoadingPesanan?u.a.createElement(u.a.Fragment,null,u.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Search"):"Search"))))}}]),e}(_.Component);p=Object(k.a)({form:"ModalPesanan",enableReinitialize:!0})(p);var g=Object(m.b)(function(a){return{setCamera:a.databarang.setCamera,hideModal:a.datamaster.modalDialog}},null)(p),h=e(11),f=Object(s.I)(function(){return e.e(88).then(e.bind(null,1236))}),j=function(a){Object(i.a)(e,a);var t=Object(d.a)(e);function e(a){var r;return Object(n.a)(this,e),(r=t.call(this,a)).showBarangPesanan=function(){r.props.dispatch(Object(b.b)("fromModalPesanan")),r.props.dispatch(Object(s.T)()),r.props.dispatch(Object(b.w)())},r.state={isEdit:!1,modalDialog:!1,isLoading:!1,formEdit:!1,loadingData:!1,databarang:[],dataPesanan:[],formTambahBarang:!1,fromModalPesanan:!1,formBerlian:!1,isLoadingPesanan:!1,noPesanan:"",columns:[{dataField:"kode_barcode",text:"Kode Barcode",sort:!0},{dataField:"kode_group",text:"Kode Group"},{dataField:"kode_toko",text:"Kode Baki"},{dataField:"kode_dept",text:"Kode Jenis"},{dataField:"nama_barang",text:"Nama Barang"},{dataField:"berat",text:"Berat"},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:function(a,t){return s.n.createElement("div",{className:"row text-center"},s.n.createElement("div",{className:"col-12"},s.n.createElement("button",{type:"button",onClick:function(){return r.showModalDuplikatBarang(t)},className:"btn btn-primary mr-3"},s.n.createElement("i",{className:"fa fa-copy"}))))}}]},r.handleSubmit=r.handleSubmit.bind(Object(o.a)(r)),r.showModalTambahBarang=r.showModalTambahBarang.bind(Object(o.a)(r)),r.tambahbarang=r.tambahbarang.bind(Object(o.a)(r)),r}return Object(r.a)(e,[{key:"componentDidMount",value:function(){localStorage.removeItem("estimasi_harga_tambah"),Object(s.S)("data_batu",[]),Object(s.S)("total_rp",0),Object(s.S)("total_usd",0)}},{key:"componentWillUnmount",value:function(){Object(s.S)("data_batu",[]),Object(s.S)("total_rp",0),Object(s.S)("total_usd",0)}},{key:"tambahbarang",value:function(a){var t=this;this.setState({isLoading:!0}),setTimeout(function(){var e=Object(s.E)("data_batu")||[],n=[];e.forEach(function(a){var t={jenis_batu:a.jenis_batu,jumlah:a.jumlah,karat_batu:a.karat_batu,kode_shape:a.shape,kode_color:a.color,kode_clarity:a.clarity,kode_cutgrade:a.cute_grade,kode_polish:a.polish,kode_symmetry:a.symmetry,kode_fluorescence:a.fluorescence,size:a.size};n.push(t)});var r={id_barang_pesanan:"-",is_from_sepuh:!1,kode_group:a.kode_kategori,kode_dept:a.kode_jenis,kode_gudang:a.kode_gudang,kode_toko:a.kode_lokasi_toko,kode_intern:a.kode_intern||"-",nama_barang:a.nama_barang,berat:parseFloat(a.berat),berat_stock:void 0===a.berat_stock?0:a.berat_stock,berat_asli:"PESANAN"===a.status_pesanan?parseFloat(a.berat):parseFloat(a.berat_asli)||0,kadar_modal:parseFloat(a.kadar_modal)||0,kadar:parseFloat(a.kadar),kadar_cetak:a.kadar_cetak.toString(),nama_atribut:a.nama_atribut||"-",berat_atribut:parseFloat(a.berat_atribut)||0,berat_plastik:parseFloat(a.berat_plastik)||0,harga_atribut:parseInt(a.harga_atribut)||0,tag_id:"-",berat_bandrol:0,no_pesanan:a.no_pesanan||"-",no_seri:a.no_seri||"-",data_berlian:n,ongkos_berlian:parseInt(a.ongkos_berlian)||0,profit:parseInt(a.profit)||0,total_harga:parseInt(a.total_harga)||0,total_usd:parseInt(Object(s.E)("total_usd"))||0},o=void 0!==a.foto?Object(h.c)(a.foto):void 0;setTimeout(function(){Object(l.k)("tambah-barang/create",r).then(function(e){void 0!==o&&Object(l.o)(o,"foto_produk/"+e.data.kode_barcode).then(function(a){}).catch(function(a){Object(s.t)("info","upload Foto Gagal, Silahkan Edit Didata Barang")}),Object(l.d)("barang/get/by-kode-baki?kode_baki="+a.kode_lokasi_toko).then(function(a){0===a.data.length?t.setState({databarang:[]}):t.setState({databarang:a.data}),t.setState({isLoading:!1})}).catch(function(a){t.setState({isLoading:!1,databarang:[]}),Object(s.t)("info","Kode Baki Yang Anda Dicari Tidak Ada")}),Object(s.S)("data_batu",[]),Object(s.S)("total_usd",0),Object(s.S)("total_rp",0),t.props.dispatch(Object(s.R)("FormTambahBarang")),t.props.dispatch(Object(s.G)()),Object(s.t)("success","Data Barang Berhasil Di Tambahkan")}).catch(function(a){var e,n;t.setState({isLoading:!1}),Object(s.t)("info",(null===(e=a.response)||void 0===e?void 0:null===(n=e.data)||void 0===n?void 0:n.message)||"Gagal Tambah Barang Silahkan Coba Lagi")})},300)},2e3)}},{key:"showModalDuplikatBarang",value:function(a){var t=this,e=0;Object(l.e)("para-system/key/CURRENCY_DOLLAR_RUPIAH").then(function(a){e=parseInt(a.data.value||0)}).catch(function(a){}),Object(l.i)("foto_produk/"+a.kode_barcode).then(function(n){var r={foto:n,kode_barcode:a.kode_barcode,nama_barang:a.nama_barang,nama_atribut:a.nama_atribut||"-",harga_atribut:a.harga_atribut||0,kode_intern:a.kode_intern,kadar:a.kadar||0,kadar_cetak:a.kadar_cetak||0,kadar_modal:a.kadar_modal||0,kode_kategori:a.kode_group,kode_jenis:a.kode_dept,kode_lokasi_toko:a.kode_toko+"~"+a.kode_gudang,berat:a.berat,berat_asli:a.berat,berat_atribut:a.berat_atribut||0,berat_plastik:a.berat_plastik||0,profit:a.profit||0,ongkos_berlian:a.ongkos_berlian||0,no_seri:a.no_seri||"-",tag_id:a.tag_id,berat_bandrol:0},o=parseInt(a.total_usd||0)*parseInt(e||0);Object(s.S)("total_rp",o);var i=[];a.data_berlian.forEach(function(a){var t={jenis_batu:a.jenis_batu||"-",jumlah:a.jml_batu||0,karat_batu:a.karat_batu||0,shape:a.kode_shape||"-",color:a.kode_color||"-",clarity:a.kode_clarity||"-",cute_grade:a.kode_cutgrade||"-",polish:a.kode_polish||"-",symmetry:a.kode_symmetry||"-",fluorescence:a.kode_fluorescence||"-",size:a.size||0};i.push(t)}),Object(s.S)("data_batu",i),Object(s.S)("total_usd",a.total_usd),Object(s.S)("data_kategori_jenis",r),t.props.dispatch(Object(b.b)("FormTambahBarang")),t.props.dispatch(Object(s.T)()),t.props.dispatch(Object(c.g)(r))}).catch(function(n){var r={foto:s.H,kode_barcode:a.kode_barcode,nama_barang:a.nama_barang,nama_atribut:a.nama_atribut||"-",harga_atribut:a.harga_atribut||0,kode_intern:a.kode_intern,kadar:a.kadar||0,kadar_cetak:a.kadar_cetak||0,kadar_modal:a.kadar_modal||0,kode_kategori:a.kode_group,kode_jenis:a.kode_dept,kode_lokasi_toko:a.kode_toko+"~"+a.kode_gudang,berat:a.berat,berat_asli:a.berat,berat_atribut:a.berat_atribut||0,berat_plastik:a.berat_plastik||0,ongkos_berlian:a.ongkos_berlian||0,no_seri:a.no_seri||"-",profit:a.profit||0,tag_id:a.tag_id,berat_bandrol:0},o=parseInt(a.total_usd||0)*parseInt(e||0);Object(s.S)("total_rp",o);var i=[];a.data_berlian.forEach(function(a){var t={jenis_batu:a.jenis_batu||"-",jumlah:a.jml_batu||0,karat_batu:a.karat_batu||0,shape:a.kode_shape||"-",color:a.kode_color||"-",clarity:a.kode_clarity||"-",cute_grade:a.kode_cutgrade||"-",polish:a.kode_polish||"-",symmetry:a.kode_symmetry||"-",fluorescence:a.kode_fluorescence||"-",size:a.size||0};i.push(t)}),Object(s.S)("data_batu",i),Object(s.S)("total_usd",a.total_usd),Object(s.S)("data_kategori_jenis",r),t.props.dispatch(Object(b.b)("FormTambahBarang")),t.props.dispatch(Object(s.T)()),t.props.dispatch(Object(c.g)(r))})}},{key:"showModalTambahBarang",value:function(a){var t=this;this.setState({loadingmodal:!0}),(Object(s.E)("module")||[]).findIndex(function(a){return"true"===a.value})>=0?Object(l.n)("penerimaan-suplier/ready-input?kode_dept="+a.kode_jenis).then(function(a){Object(s.S)("saldo_supplier",a.data.saldo),t.props.dispatch(Object(s.T)()),t.props.dispatch(Object(b.b)("FormTambahBarang"))}).catch(function(a){Object(s.t)("info","Terjadi Kesalhaan Saat Request Data, Coba Lagi"),t.props.dispatch(Object(b.b)("FormTambahBarang"))}):this.props.dispatch(Object(s.T)()),this.props.dispatch(Object(c.g)(a)),Object(s.S)("data_kategori_jenis",a),this.props.dispatch(Object(b.b)("FormTambahBarang"))}},{key:"getBarangPesanan",value:function(){Object(l.d)("pesanan/no/"+this.state.noPesanan).then(function(a){return console.log(a.data)}).catch(function(a){return Object(s.t)("info",a.response.data)})}},{key:"handleSubmit",value:function(a){var t=this;this.setState({isLoading:!0});var e={nama_barang:a.nama_barang,nama_atribut:a.nama_atribut,harga_atribut:a.harga_atribut,kode_intern:a.kode_intern,kadar:a.kadar,kadar_cetak:a.kadar_cetak},n=void 0!==a.foto?Object(h.c)(a.foto):void 0;Object(s.M)("barang/edit/"+a.kode_barcode,e).then(function(){t.props.dispatch(Object(s.G)())}).then(function(){void 0!==n&&Object(l.o)(n,"foto_produk/"+a.kode_barcode).then(function(a){}).catch(function(a){Object(s.t)("info","upload Foto Gagal, Silahkan Edit Didata Barang")})}).then(function(){t.setState({databarang:[]}),t.props.dispatch(Object(s.R)("HeadEditDataBarang")),t.props.dispatch(Object(c.f)(!1))}).then(function(){Object(s.t)("success","Data Berhasil Disimpan")}).then(function(){t.setState({isLoading:!1})}).catch(function(a){t.setState({isLoading:!1}),Object(s.t)("info","Barang Gagal Di Edit")})}},{key:"getNomorPesanan",value:function(a){var t=this;this.setState({isLoadingPesanan:!0}),Object(l.k)("pesanan/valid/no",{no_pesanan:a.value.trim()}).then(function(e){t.setState({isLoadingPesanan:!1});var n=Object(s.E)("kode_lokasi_toko"),r=Object(s.E)("kode_jenis"),o=Object(s.E)("kode_group"),i=[];e.data.detail_barang.forEach(function(e){"-"===e.kode_barcode?i={kode_barcode:e.kode_barcode,nama_atribut:e.attribut||"-",harga_atribut:e.harga_atribut||0,kode_intern:"-",kadar:e.perkiraan_kadar,nama_barang:e.keterangan,ongkos:e.ongkos||0,kadar_cetak:0,kadar_modal:e.kadar_modal||0,kode_kategori:o,kode_jenis:r,kode_lokasi_toko:n,berat:e.perkiraan_berat,berat_asli:e.perkiraan_berat||0,berat_atribut:e.berat_atribut||0,berat_plastik:e.berat_plastik||0,tag_id:e.tag_id||"-",berat_bandrol:0,no_pesanan:a.value,status:"PESANAN"}:Object(l.d)("imagebarang/get/by-kode-barcode/"+e.kode_barcode).then(function(d){t.setState({isLoadingPesanan:!1}),i={foto:d.data.dataimage||"",kode_barcode:e.kode_barcode,nama_atribut:e.attribut||"-",harga_atribut:e.harga_atribut||0,kode_intern:"-",kadar:e.perkiraan_kadar,nama_barang:e.keterangan,ongkos:e.ongkos||0,kadar_cetak:0,kadar_modal:e.kadar_modal||0,kode_kategori:o,kode_jenis:r,kode_lokasi_toko:n,berat:e.perkiraan_berat,berat_asli:e.perkiraan_berat||0,berat_atribut:e.berat_atribut||0,berat_plastik:e.berat_plastik||0,tag_id:e.tag_id||"-",berat_bandrol:0,no_pesanan:a.value,status:"PESANAN"}}).catch(function(d){t.setState({isLoadingPesanan:!1}),i={kode_barcode:e.kode_barcode,nama_atribut:e.attribut||"-",harga_atribut:e.harga_atribut||0,kode_intern:"-",kadar:e.perkiraan_kadar,kadar_cetak:0,kadar_modal:e.kadar_modal||0,kode_kategori:o,nama_barang:e.keterangan,ongkos:e.ongkos||0,kode_jenis:r,kode_lokasi_toko:n,berat:e.perkiraan_berat,berat_asli:e.perkiraan_berat||0,berat_atribut:e.berat_atribut||0,berat_plastik:e.berat_plastik||0,tag_id:e.tag_id||"-",berat_bandrol:0,no_pesanan:a.value,status:"PESANAN"}})}),t.props.dispatch(Object(s.T)()),t.props.dispatch(Object(c.g)(i)),t.props.dispatch(Object(b.b)("FormTambahBarang"))}).catch(function(a){t.setState({isLoadingPesanan:!1}),Object(s.t)("info",void 0===a.response?"Terjadi Kesalahan Saat Request Data":a.response.data.message)})}},{key:"modalBerlian",value:function(a){this.props.dispatch(Object(c.g)(a)),this.props.dispatch(Object(b.b)("formBerlian"))}},{key:"render",value:function(){var a=this,t={renderer:function(a){return s.n.createElement("div",{className:"container"},s.n.createElement("div",{className:"row"},s.n.createElement("div",{className:"col-12"},"Nama Atribut : ",a.nama_atribut," ",s.n.createElement("br",null),"Berat Atribut : ",a.berat_atribut," ",s.n.createElement("br",null),"Berat Plastik : ",a.berat_plastik," ",s.n.createElement("br",null),"Harga Atribut : ",a.harga_atribut," ",s.n.createElement("br",null),"Kode Intern : ",a.kode_intern," ",s.n.createElement("br",null),"Kadar : ",a.kadar," ",s.n.createElement("br",null),"Kadar Cetak : ",a.kadar_cetak," ",s.n.createElement("br",null),"Kode Toko : ",a.kode_toko," ",s.n.createElement("br",null),"Kode Gudang : ",a.kode_gudang," ",s.n.createElement("br",null),"Stock : ",a.stock_on_hand," ",s.n.createElement("br",null))))},showExpandColumn:!0,expandByColumnOnly:!0};return s.n.createElement("div",null,s.n.createElement("ol",{className:"breadcrumb float-xl-right"},s.n.createElement("li",{className:"breadcrumb-item"},s.n.createElement(s.g,{to:"#"},"Barang")),s.n.createElement("li",{className:"breadcrumb-item active"},"Tambah Barang")),s.n.createElement("h1",{className:"page-header"},"Tambah Barang "),s.n.createElement(s.k,null,s.n.createElement(s.m,null,"Tambah Data Barang"),s.n.createElement("br",null),s.n.createElement(s.l,null,s.n.createElement(f,{onSubmit:function(t){return a.showModalTambahBarang(t)},barangPesanan:this.showBarangPesanan}))),s.n.createElement(s.k,null,s.n.createElement(s.m,null,"Data Barang"),s.n.createElement("br",null),s.n.createElement(s.l,null,s.n.createElement(s.s,{keyField:"kode_barcode",exportCsv:!0,data:this.state.databarang,columns:this.state.columns,empty:!0,textEmpty:this.state.loadingData?s.n.createElement(s.n.Fragment,null," ",s.n.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Mencari Data Barang"):"Data Barang Kosong",expandRow:t})),s.n.createElement("br",null),s.n.createElement(s.i,{size:"FormTambahBarang"===this.props.FormModal?"l":"fromModalPesanan"===this.props.FormModal?"l":(this.props.FormModal,"xl"),form:"formBerlian"===this.props.FormModal&&"formBerlian",title:"FormTambahBarang"===this.props.FormModal?"Tambah Barang":"fromModalPesanan"===this.props.FormModal?"Barang Pesanan":"formBerlian"===this.props.FormModal?"Form Tambah Berlian":"Edit Barang",content:"FormTambahBarang"===this.props.FormModal?s.n.createElement(c.a,{modalBerlian:function(t){return a.modalBerlian(t)},isLoading:this.state.isLoading,onSubmit:function(t){return a.tambahbarang(t)}}):"fromModalPesanan"===this.props.FormModal?s.n.createElement(g,{isLoadingPesanan:this.state.isLoadingPesanan,getNomorPesanan:function(t){return a.getNomorPesanan(t)},onSubmit:function(t){return a.tambahbarang(t)}}):"formBerlian"===this.props.FormModal?s.n.createElement(c.d,null):s.n.createElement(c.c,{isLoading:this.state.isLoading,onSubmit:function(t){return a.handleSubmit(t)}})})))}}]),e}(s.n.Component);t.default=Object(s.u)(function(a){return{FormModal:a.datamaster.FormModal}})(j)}}]);
//# sourceMappingURL=89.e8f8d5b4.chunk.js.map