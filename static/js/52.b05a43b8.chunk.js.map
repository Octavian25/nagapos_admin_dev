{"version":3,"sources":["pages/Barang/HancurDataBarang/HeadaHancurDataBarang.jsx","Validasi/Barang/PindahBarang/ValidasiPindahBarang.jsx"],"names":["HeadaHancurDataBarang","props","_this","Object","C_Users_Octavian_OneDrive_Documents_GitHub_nagapos_admin_master_repo_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","_super","call","state","date","Date","isLoadingBatal","kondisi_barang","dispatch","getDataKondisiBarang","e","_this2","clearTimeout","delay","setTimeout","getData","then","res","data","length","ToastNotification","change","forEach","list","index","kode_barcode","kode_group","kode_dept","nama_barang","nama_atribut","berat","cek","JSON","parse","localStorage","getItem","findIndex","hasil","push","setItem","stringify","setHancurBarang","catch","err","response","_this3","setState","_this4","react__WEBPACK_IMPORTED_MODULE_4___default","a","createElement","onSubmit","handleSubmit","autoComplete","onKeyPress","key","preventDefault","className","redux_form__WEBPACK_IMPORTED_MODULE_6__","label","name","onChange","options","datakondisi","filter","undefined","map","value","placeholder","component","ReanderSelect","getKodeBarcode","target","ReanderField","type","_components_helpers_tabel__WEBPACK_IMPORTED_MODULE_12__","keyField","pagination","exportCsv","columns","empty","textEmpty","disabled","isLoading","Fragment","onClick","batalHancur","react_fullscreen_loading__WEBPACK_IMPORTED_MODULE_15___default","loading","background","loaderColor","Component","reduxForm","form","enableReinitialize","validate","ValidasiPindahBarang","connect","datamaster","databarang","errors","kode_gudang","kode_baki","statusAktif"],"mappings":"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","file":"static/js/52.b05a43b8.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Field, reduxForm } from \"redux-form\";\r\nimport { setHancurBarang } from \"../../../actions/databarang_action\";\r\nimport { getDataKondisiBarang } from \"../../../actions/datamaster_action\";\r\nimport { ReanderSelect, ReanderField } from \"../../../components/helpers/field\";\r\nimport { ToastNotification } from \"../../../components/helpers/notification\";\r\nimport Tabel from \"../../../components/helpers/tabel\";\r\nimport { getData } from \"../../../config/axios\";\r\nimport ValidasiPindahBarang from \"../../../Validasi/Barang/PindahBarang/ValidasiPindahBarang\";\r\nimport Loading from 'react-fullscreen-loading';\r\nconst maptostate = (state) => {\r\n  return {\r\n    datakondisi: state.datamaster.getDataKondisiBarang,\r\n    setHancurBarang: state.databarang.setHancurBarang,\r\n  };\r\n};\r\nclass HeadaHancurDataBarang extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      date: new Date(),\r\n      isLoadingBatal: false,\r\n      kondisi_barang: \"kosong\",\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.props.dispatch(getDataKondisiBarang());\r\n  }\r\n  getKodeBarcode(e) {\r\n    clearTimeout(this.delay)\r\n    this.delay = setTimeout(() => {\r\n      if(e === \"\"){\r\n        return false;\r\n      }\r\n      getData(\"barang/open/kode-barcode?kode_barcode=\" + e)\r\n        .then((res) => {\r\n          if (res.data.length === 0) {\r\n            ToastNotification(\"info\", \"Data Yang Dicari Tidak Ada\");\r\n          } else {\r\n            if (this.state.kondisi_barang ===\"kosong\") {\r\n                ToastNotification(\"info\", \"Kondisi Barang Harus Dipilih\");\r\n                this.props.change(\"kode_barcode\", \"\");\r\n            } else {\r\n              res.data.forEach((list, index) => {\r\n                let data = {\r\n                  kode_barcode: list.kode_barcode,\r\n                  kode_group: list.kode_group,\r\n                  kode_dept: list.kode_dept,\r\n                  nama_barang: list.nama_barang,\r\n                  nama_atribut: list.nama_atribut,\r\n                  berat: list.berat,\r\n                  kondisi_barang: this.state.kondisi_barang,\r\n                };\r\n                //   console.log(data);\r\n                let cek =\r\n                  JSON.parse(localStorage.getItem(\"data_barang_hancur_tmp\")) ||\r\n                  [];\r\n                let hasil_cek = cek.findIndex(\r\n                  (hasil) => hasil.kode_barcode === e\r\n                );\r\n                //   console.log(index);\r\n                if (hasil_cek === -1) {\r\n                  cek.push(data);\r\n                  localStorage.setItem(\r\n                    \"data_barang_hancur_tmp\",\r\n                    JSON.stringify(cek)\r\n                  );\r\n                    this.props.dispatch(setHancurBarang(cek));\r\n                   this.props.change(\"kode_barcode\", \"\");\r\n                }\r\n              });\r\n            }\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          ToastNotification(\"info\", err.response && err.response.data);\r\n        });\r\n    }, 1500);\r\n  }\r\n\r\n  batalHancur() {\r\n    this.setState({ isLoadingBatal: true })\r\n    setTimeout(() => {\r\n      this.setState({ isLoadingBatal: false })\r\n      localStorage.setItem('data_barang_hancur_tmp', JSON.stringify([]))\r\n      this.props.dispatch(setHancurBarang([]));\r\n    }, 500);\r\n  }\r\n  render() {\r\n    return (\r\n      <form onSubmit={this.props.handleSubmit} autoComplete=\"off\"\r\n      onKeyPress={(e) => {\r\n        e.key === \"Enter\" && e.preventDefault();\r\n      }}\r\n      >\r\n        <div className=\"row\">\r\n          <div className=\"col-lg-6\">\r\n            <Field\r\n              label=\"Kondisi Barang\"\r\n              name=\"kondisi_barang\"\r\n              onChange={(e) => {\r\n                this.setState({ kondisi_barang: e });\r\n              }}\r\n              options={this.props.datakondisi\r\n                .filter((list) => list.kondisi_barang !== undefined)\r\n                .map((list) => {\r\n                  let data = {\r\n                    value: list.kondisi_barang,\r\n                    name: list.kondisi_barang,\r\n                  };\r\n                  return data;\r\n                })}\r\n              placeholder={\"Silahkan Pilih Kondisi Barang\"}\r\n              component={ReanderSelect}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"col-lg-6\">\r\n            <Field\r\n              onChange={(e) => this.getKodeBarcode(e.target.value)}\r\n              name=\"kode_barcode\"\r\n              component={ReanderField}\r\n              type=\"text\"\r\n              label=\"Kode Barcode\"\r\n              placeholder=\"Masukan Kode Barcode\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <Tabel\r\n          keyField=\"kode_barcode\"\r\n          pagination=\"off\"\r\n          exportCsv={false}\r\n          data={\r\n            this.props.setHancurBarang.length === 0\r\n              ? JSON.parse(localStorage.getItem(\"data_barang_hancur_tmp\"))\r\n              : this.props.setHancurBarang\r\n          }\r\n          columns={this.props.columns}\r\n          empty={true}\r\n          textEmpty=\"Data Barang Kosong\"\r\n        />\r\n        <div className=\"row\">\r\n          <div className=\"col-10\">\r\n            <button\r\n              className=\"btn btn-primary\"\r\n              type=\"submit\"\r\n              disabled={this.props.isLoading}\r\n            >\r\n              {this.props.isLoading ? (\r\n                <>\r\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Sedang\r\n                  Menyimpan\r\n                </>\r\n              ) : (\r\n                \"Simpan Data\"\r\n              )}\r\n            </button>\r\n            &nbsp;\r\n            <button\r\n              className=\"btn btn-warning\"\r\n              type=\"button\"\r\n              onClick={()=>this.batalHancur()}\r\n              disabled={this.props.isLoading}\r\n            >\r\n              {this.state.isLoadingBatal ? (\r\n                <>\r\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Sedang\r\n                  Membatal\r\n                </>\r\n              ) : (\r\n                \"Batal\"\r\n              )}\r\n            </button>\r\n          </div>\r\n          {/* <div className=\"2\">\r\n            {JSON.parse(localStorage.getItem(\"data_barang_hancur_tmp\")) ===\r\n            null ? null : (\r\n              <>\r\n                Total Barang :{\" \"}\r\n                {this.props.setHancurBarang.length === 0\r\n                  ? JSON.parse(localStorage.getItem(\"data_barang_hancur_tmp\"))\r\n                      .length || 0\r\n                  : this.props.setHancurBarang.length || 0}\r\n                <br />\r\n                Total Berat :\r\n                {this.props.setHancurBarang.length === 0\r\n                  ? JSON.parse(localStorage.getItem(\"data_barang_hancur_tmp\"))\r\n                      .map((column, key) => column.berat)\r\n                      .reduce((a, b) => a + b, 0)\r\n                      .toFixed(1)\r\n                  : this.props.setHancurBarang\r\n                      .map((column, key) => column.berat)\r\n                      .reduce((a, b) => a + b, 0)\r\n                      .toFixed(1)}\r\n              </>\r\n            )}\r\n          </div> */}\r\n        </div>\r\n        {this.props.isLoading ? (\r\n        <Loading \r\n        loading\r\n        background=\"rgba(0, 0, 0, 0.35)\"\r\n         loaderColor=\"rgba(94, 147, 117, 1)\" />\r\n      ) : null}\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nHeadaHancurDataBarang = reduxForm({\r\n  form: \"HeadaHancurDataBarang\",\r\n  enableReinitialize: true,\r\n  validate: ValidasiPindahBarang,\r\n})(HeadaHancurDataBarang);\r\nexport default connect(maptostate, null)(HeadaHancurDataBarang);\r\n","const ValidasiPindahBarang = (value) => {\r\n    const errors = {};\r\n    if (!value.kode_gudang) {\r\n        errors.kode_gudang = \"Kode Gudang Tidak Boleh Kosong\";\r\n    }\r\n    if (!value.kode_baki) {\r\n        errors.kode_baki = \"Nama Baki Tidak Boleh Kosong\";\r\n    }\r\n\r\n    if (!value.statusAktif) {\r\n        errors.statusAktif = \"Status Tidak Boleh Kosong\";\r\n    }\r\n\r\n    return errors;\r\n}\r\nexport default ValidasiPindahBarang;\r\n\r\n\r\n"],"sourceRoot":""}