(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{1291:function(e,t,a){"use strict";a.r(t);var n=a(19),i=a(20),r=a(33),o=a(22),c=a(21),s=a(27),l=a.n(s),u=a(12),m=a(13),d=a(11),p=a(792),b=function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).state={isLoading:!1,isChecked:!0,no_pengiriman:[]},i}return Object(i.a)(a,[{key:"chnageValue",value:function(e){var t=this;this.setState({isChecked:!this.state.isChecked}),!0===this.state.isChecked?(Object(u.B)("penerimaan-suplier/trx-number").then(function(e){t.props.change("no_pengiriman",e.data.no_terima)}),this.props.change("berat","")):this.props.change("no_pengiriman","")}},{key:"componentDidMount",value:function(){var e=this;this.props.dispatch(Object(p.b)()),this.props.dispatch(Object(p.e)()),Object(m.h)("kirim-stock/get/after-valid/"+Object(d.j)().kode_toko).then(function(t){e.setState({no_pengiriman:[]}),e.setState({no_pengiriman:t.data})})}},{key:"setValue",value:function(e){var t=this;this.state.no_pengiriman.filter(function(t){return t.no_bon===e}).map(function(e){return e.detail_barang.forEach(function(e){t.props.change("berat",e.bruto)}),[]})}},{key:"render",value:function(){var e=this;return u.n.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off",onKeyPress:function(e){"Enter"===e.key&&e.preventDefault()}},u.n.createElement("div",{className:"row"},u.n.createElement("div",{className:"col-3"},this.state.isChecked?u.n.createElement(u.c,{label:"No Pengiriman",name:"no_pengiriman",onChange:function(t){return e.setValue(t)},options:this.state.no_pengiriman.map(function(e){return{value:e.no_bon,name:e.no_bon}}),placeholder:"Silahkan No Pengiriman",component:u.q}):u.n.createElement(u.c,{label:"No Pengiriman",name:"no_pengiriman",readOnly:!0,placeholder:"Silahkan No Pengiriman",component:u.p})),u.n.createElement("div",{className:"col-3"},u.n.createElement("div",{className:"form-group"},u.n.createElement("label",null,"\xa0"),u.n.createElement("br",null),u.n.createElement("label",null,u.n.createElement(u.c,{id:"bukan_barang_supliar",name:"bukan_barang_supliar",component:"input",onClick:function(t){return e.chnageValue(t)},type:"checkbox",value:!1})," ","Bukan Suplier")))),u.n.createElement("div",{className:"row"},u.n.createElement("div",{className:"col-4"},u.n.createElement(u.c,{label:"Kategori",name:"kode_group",placeholder:"Silahkan Pilih kategori",onChange:function(t){return e.setState({kode_group:t})},options:this.props.DataGroup.map(function(e){return{value:e.kode_group,name:e.kode_group}||[]}),component:u.q})),u.n.createElement("div",{className:"col-3"},u.n.createElement(u.c,{label:"jenis",name:"jenis",placeholder:"Silahkan Pilih Jenis",options:this.props.DataJenis.filter(function(t){return t.kode_group===e.state.kode_group}).map(function(e){return{value:e.kode_dept,name:e.kode_dept}}),component:u.q})),u.n.createElement("div",{className:"col-3"},u.n.createElement(u.c,{label:"Berat",name:"berat",normalize:u.d,readOnly:this.state.isChecked,placeholder:"Silahkan Pilih Berat",component:u.p})),u.n.createElement("div",{className:"col-2"},u.n.createElement("button",{className:"btn btn-primary btn-block mt-4"}," ",u.n.createElement("i",{className:"fa fa-plus"})," "))))}}]),a}(u.n.Component);b=Object(u.Q)({form:"HeadPenerimaanBarang",enableReinitialize:!0})(b);var h=Object(u.u)(function(e){return{DataGroup:e.datamaster.GetDataGroup,DataJenis:e.datamaster.getDataJenis}})(b),g=function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).state={isLoading:!1,columns:[{dataField:"no_suplier",text:"No Pengiriman"},{dataField:"kode_group",text:"Kategori"},{dataField:"kode_jenis",text:"Jenis"},{dataField:"berat",text:"Berat",headerClasses:"text-right",formatter:function(e){return u.n.createElement("div",{className:"text-right"}," ",e," ")}},{dataField:"action",text:"Action",csvExport:!1,headerClasses:"text-center",formatter:function(e,t,a){return u.n.createElement("div",{className:"row text-center"},u.n.createElement("div",{className:"col-12"},u.n.createElement("button",{type:"button",onClick:function(){return i.hapusdata(a)},className:"btn btn-danger mr-3"},u.n.createElement("i",{className:"fa fa-trash"}))))}}]},i.handleSubmit=i.handleSubmit.bind(Object(r.a)(i)),i}return Object(i.a)(a,[{key:"handleSubmit",value:function(e){if(void 0===e.kode_group)return Object(u.t)("info","Kategori Harus Dipilih"),!1;if(void 0===e.jenis)return Object(u.t)("info","Jenis Harus Dipilih"),!1;if(!0===e.bukan_barang_supliar&&void 0===e.berat)return Object(u.t)("info","Berat Tida Boleh Kosong"),!1;var t={id:Object(u.U)(),no_suplier:e.no_pengiriman,kode_group:e.kode_group,kode_jenis:e.jenis,berat:void 0===e.berat?0:parseFloat(e.berat),type:!0===e.bukan_barang_supliar?"OWNER":"SUPPLIER"},a=0===Object(u.E)("data_terima_barang").length?[]:Object(u.E)("data_terima_barang");-1===a.findIndex(function(t){return t.no_suplier===e.no_pengiriman})?(a.push(t),Object(u.S)("data_terima_barang",a),this.setState({berhasi:!0})):-1===a.findIndex(function(t){return t.kode_group===e.kode_group})?(a.push(t),Object(u.S)("data_terima_barang",a),this.setState({berhasi:!0})):-1===a.findIndex(function(t){return t.kode_jenis===e.jenis})?(a.push(t),Object(u.S)("data_terima_barang",a),this.setState({berhasi:!0})):Object(u.t)("info","No Pengiriman Sudah Ada Ditable")}},{key:"hapusdata",value:function(e){var t=this;l.a.fire({title:"Anda Yakin !!",text:"Ingin Menghapus Data Ini ?",icon:"warning",position:"top-center",cancelButtonText:"Tidak",showCancelButton:!0,confirmButtonText:"OK",showConfirmButton:!0}).then(function(a){if(a.isConfirmed){var n=JSON.parse(localStorage.getItem("data_terima_barang"));n.splice(e,1),Object(u.S)("data_terima_barang",n),t.setState({berhasi:!1})}})}},{key:"kirimbarang",value:function(){var e=this,t=Object(u.E)("data_terima_barang");this.setState({isLoading:!0});var a=[];t.forEach(function(e){var t={no_suplier:e.no_suplier,kode_group:e.kode_group,kode_jenis:e.kode_jenis,berat:e.berat,type:e.type};a.push(t)}),Object(m.n)("penerimaan-suplier",a).then(function(a){Object(u.S)("data_terima_barang",[]),e.setState({isLoading:!1}),Object(m.l)("kirim-stock/post/terima-stock/"+t.no_suplier).then(function(e){console.log(e)}),Object(u.t)("success",a.data.message),window.location.reload()}).catch(function(t){var a;console.log(t),e.setState({isLoading:!1}),Object(u.t)("info",null===(a=t.response)||void 0===a?void 0:a.data.message)})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return u.n.createElement("div",null,u.n.createElement("ol",{className:"breadcrumb float-xl-right"},u.n.createElement("li",{className:"breadcrumb-item"},u.n.createElement(u.g,{to:"#"},"Barang")),u.n.createElement("li",{className:"breadcrumb-item active"},"Penerimaan Barang")),u.n.createElement("h1",{className:"page-header"},"Penerimaan Barang "),u.n.createElement(u.k,null,u.n.createElement(u.m,null,"Penerimaan Barang"),u.n.createElement(u.l,null,u.n.createElement(h,{onSubmit:function(t){return e.handleSubmit(t)}}),u.n.createElement(u.s,{keyField:"id",exportCsv:!1,pagination:"off",data:Object(u.E)("data_terima_barang")||[],columns:this.state.columns,empty:!0,textEmpty:"Data Barang Kosong"}),u.n.createElement("div",{className:"text-right"},u.n.createElement("button",{className:"btn btn-primary",disabled:this.state.isLoading,onClick:function(){return e.kirimbarang()}},this.state.isLoading?u.n.createElement(u.n.Fragment,null,u.n.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Menyimpan"):"Simpan")))),this.state.isLoading&&u.n.createElement(u.h,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}))}}]),a}(u.n.Component);g=Object(u.Q)({form:"PenerimaanBaarang",enableReinitialize:!0})(g);t.default=Object(u.u)()(g)}}]);
//# sourceMappingURL=86.58a06534.chunk.js.map