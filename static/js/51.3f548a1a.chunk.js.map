{"version":3,"sources":["pages/Kasir/ValidasiJualBeli/HeadValidasiJualBeli.jsx","pages/Kasir/ValidasiJualBeli/FormValidasiJualBeli.jsx","assets/image-not-found.png","pages/Kasir/ValidasiJualBeli/pdf/CetakFakturJualBeli.jsx"],"names":["HeadValidasiJualBeli","props","_this","Object","classCallCheck","this","_super","call","state","isLoading","DataValidasi","btnValidasi","kode_sales","warna","dispatch","getDataSales","saveValidasiJual","length","saveValidasiBeli","saveValidasiTitipan","localStorage","setItem","JSON","stringify","getDetaValidasi","_this2","setState","postDataNoTImeOut2","then","res","data","pembelian","penjualan","ToastNotification","change","forEach","element","harga_total","harga","disableButtonValidasi","catch","err","_err$response","response","saveValidasiPesanan","selectRowPenjualan","mode","clickToSelect","selectColumnPosition","onSelect","row","isSelect","rowIndex","e","hasil","no_faktur_group","cek","parse","getItem","findIndex","push","splice","onSelectAll","list","index","selectRowPembelian","react_default","a","createElement","onSubmit","handleSubmit","autoComplete","onKeyPress","key","preventDefault","className","panel","tabel","selectRow","keyField","columns","columnsJual","empty","columnsBeli","disabled","type","Fragment","isLoadingBtl","onClick","btnClear","loading_default","loading","background","loaderColor","Component","reduxForm","form","enableReinitialize","connect","DataSales","datamaster","hutang","FormValidasiJualBeli","dataField","text","footer","cell","num","footerAttrs","colSpan","formatter","toFixed","columnData","reduce","acc","item","headerClasses","toLocaleString","parseFloat","columnsTitipan","columnsPesanan","bind","assertThisInitialized","setTimeout","removeItem","reset","_this3","validasi_jual","validasi_beli","penjualan_tmp","pembelian_tmp","postDataNoTImeOut","_ref","asyncToGenerator","regenerator_default","mark","_callee","DataFaktur","_iterator","_step","_hasil","IsiFaktur","_iterator2","_step2","_loop","notabeli","feedback","wrap","_context2","prev","next","notajual","createForOfIteratorHelper","s","n","done","value","Faktur","DetailFaktur","_context","jenis","getImage","isi","notFound","stop","delegateYield","t1","f","finish","t2","isLoadingValidasi","CetakFakturJualBeli","jml_alamat","head","n_alamat_customer","concat","tgl_system","nama_customer","no_hp","slice","total","harga_nota","detail","jml_nama_barang","nama_barang","no_faktur_beli","kode_dept","berat","Number","document","getElementById","join","TextFile","_x","apply","arguments","file","Blob","href","URL","createObjectURL","download","body","appendChild","click","_this4","react_router_dom","to","style","display","id","rows","cols","ValidasiJualBeli_HeadValidasiJualBeli","React","module","exports","bwip_js__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","bwip_js__WEBPACK_IMPORTED_MODULE_0___default","jspdf__WEBPACK_IMPORTED_MODULE_1__","_assets_image_not_found_png__WEBPACK_IMPORTED_MODULE_3__","_assets_image_not_found_png__WEBPACK_IMPORTED_MODULE_3___default","_components_helpers_function__WEBPACK_IMPORTED_MODULE_4__","undefined","doc","jsPDF","setFontSize","setProperties","title","setFont","getUserdata","kode_toko","status","position_x","position_y","splitTextToSize","width","parseInt","rotate","addImage","height","BwipJs","toCanvas","bcid","scale","includetext","textxalign","dataURL","toDataURL","addPage","save","string","output","x","window","open","write"],"mappings":"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","file":"static/js/51.3f548a1a.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { reduxForm } from \"redux-form\";\r\nimport { getDataSales } from \"../../../actions/datamaster_action\";\r\nimport {  postDataNoTImeOut2 } from \"../../../config/axios\";\r\nimport { ToastNotification } from \"../../../components/helpers/notification\";\r\nimport Tabel from \"../../../components/helpers/tabel\";\r\nimport {\r\n  disableButtonValidasi,\r\n  saveValidasiBeli,\r\n  saveValidasiJual,\r\n  saveValidasiPesanan,\r\n  saveValidasiTitipan,\r\n} from \"../../../actions/hutang_action\";\r\nimport { Panel, PanelHeader } from \"../../../components/panel/panel\";\r\nimport Loading from 'react-fullscreen-loading';\r\n\r\nconst maptostate = (state) => {\r\n  // let hasil = parseInt(localStorage.getItem('total_harga_jual')) - parseInt(localStorage.getItem('total_harga_beli'))\r\n  // let datausersvalidasi = localStorage.getItem('datausersvalidasi')===null ? [] : JSON.parse(localStorage.getItem('datausersvalidasi'));\r\n  return {\r\n    DataSales: state.datamaster.getDataSales,\r\n    saveValidasiBeli: state.hutang.saveValidasiBeli,\r\n    saveValidasiJual: state.hutang.saveValidasiJual,\r\n    saveValidasiTitipan: state.hutang.saveValidasiTitipan,\r\n    saveValidasiPesanan: state.hutang.saveValidasiPesanan,\r\n    btnValidasi: state.hutang.disableButtonValidasi,\r\n  };\r\n};\r\nclass HeadValidasiJualBeli extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isLoading: false,\r\n      DataValidasi: [],\r\n      btnValidasi: false,\r\n      kode_sales: false,\r\n      warna :false,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.dispatch(getDataSales());\r\n    // this.props.dispatch(disableButtonValidasi());\r\n    if (this.props.saveValidasiJual.length === 0 && this.props.saveValidasiBeli.length === 0 && this.props.saveValidasiTitipan.length === 0) {\r\n      localStorage.setItem(\r\n        \"validasi_jual\",\r\n        JSON.stringify([])\r\n      );\r\n      localStorage.setItem(\r\n        \"validasi_beli\",\r\n        JSON.stringify([])\r\n      );\r\n      localStorage.setItem(\r\n        \"validasi_titipan\",\r\n        JSON.stringify([])\r\n      );\r\n    }\r\n    this.getDetaValidasi()\r\n  }\r\n  // getDataSales(e) {\r\n  //   localStorage.setItem(\r\n  //     \"validasi_jual\",\r\n  //     JSON.stringify([])\r\n  //   );\r\n  //   localStorage.setItem(\r\n  //     \"validasi_beli\",\r\n  //     JSON.stringify([])\r\n  //   );\r\n  //   localStorage.setItem(\r\n  //     \"validasi_titipan\",\r\n  //     JSON.stringify([])\r\n  //   );\r\n  //   this.setState({\r\n  //     kode_sales: e,\r\n  //   });\r\n  //   getData(\"sales/get/by-kode-sales/\" + e)\r\n  //     .then((res) => {\r\n  //       // localStorage.setItem('datausersvalidasi',JSON.stringify(res.data))\r\n  //       this.props.change(\"nama_sales\", res.data.nama_sales);\r\n  //       this.props.dispatch(saveValidasiJual([]));\r\n  //       this.props.dispatch(saveValidasiBeli([]));\r\n  //     })\r\n  //     .catch((err) => {\r\n  //       ToastNotification(\"info\", \"Gagal Mengambil Data Ke server\");\r\n  //     });\r\n  // }\r\n  getDetaValidasi() {\r\n    this.setState({\r\n      isLoading: true,\r\n    });\r\n    // let hasil = {\r\n    //   kode_sales: this.state.kode_sales,\r\n    // };\r\n    // if (hasil.kode_sales === false) {\r\n    //   this.setState({\r\n    //     isLoading: false,\r\n    //   });\r\n    //   ToastNotification(\"info\", \"Kode Sales Harus Di pilih\");\r\n    //   return false;\r\n    // }\r\n    postDataNoTImeOut2(\"validasi/all\")\r\n      .then((res) => {\r\n        if (\r\n          res.data[0].pembelian.length === 0 &&\r\n          res.data[0].penjualan.length === 0\r\n          // res.data[0].titipan.length === 0 &&\r\n          // res.data[0].pesanan.length === 0\r\n        )\r\n        {\r\n          ToastNotification(\"info\", \"Belum Ada Data Yang Harus Di Validasi\");\r\n          this.setState({\r\n            isLoading: false,\r\n          });\r\n          this.props.change('grandtotal',0)\r\n        } else {\r\n          let harga_total = 0;\r\n          res.data[0].penjualan.forEach(element => {\r\n            harga_total = harga_total + element.harga_total\r\n          });\r\n\r\n          let harga = 0;\r\n          res.data[0].pembelian.forEach(element => {\r\n            harga = harga + element.harga\r\n          });\r\n\r\n          // let harga_total_titipan = 0;\r\n          // res.data[0].titipan.forEach(element => {\r\n          //   harga_total_titipan = harga_total_titipan + element.harga_total\r\n          // });\r\n\r\n          // let harga_total_pesanan = 0;\r\n          // res.data[0].titipan.forEach(element => {\r\n          //   harga_total_pesanan = harga_total_pesanan + element.harga_total\r\n          // });\r\n\r\n          // let hasil = Math.abs(parseInt(harga) - parseInt(harga_total));\r\n          // let hasil =parseInt(harga_total) - parseInt(harga) - parseInt(harga_total_titipan) - parseInt(harga_total_pesanan);\r\n          // // console.log(hasil);\r\n          // if (hasil < 0) {\r\n          //   // console.log('bener');\r\n          //   this.setState({\"warna\" : true})\r\n          // } else {\r\n          //   this.setState({\"warna\" : false})\r\n          // }\r\n          // this.props.change('grandtotal',hasil.toLocaleString(\"kr-KO\"))\r\n          // ToastNotification(\"success\", \"Data Validasi Tersedia\");\r\n          this.setState({\r\n            isLoading: false,\r\n          });\r\n          this.props.dispatch(disableButtonValidasi(true));\r\n          localStorage.setItem(\r\n            \"validasi_jual\",\r\n            JSON.stringify(res.data[0].penjualan)\r\n          );\r\n          localStorage.setItem(\r\n            \"validasi_beli\",\r\n            JSON.stringify(res.data[0].pembelian)\r\n          );\r\n          // localStorage.setItem(\r\n          //   \"validasi_titipan\",\r\n          //   JSON.stringify(res.data[0].titipan)\r\n          // );\r\n\r\n          \r\n          // let pesanan = [];\r\n          // res.data[0].pesanan.forEach(element => {\r\n          //     element.detail_barang.forEach(detail => {\r\n          //       let row = {\r\n          //         no_pesanan: element.no_pesanan,\r\n          //         kode_kategori : detail.kode_kategori,\r\n          //         perkiraan_berat : detail.perkiraan_berat,\r\n          //         perkiraan_kadar : detail.perkiraan_kadar,\r\n          //         harga_gram : detail.harga_gram,\r\n          //         harga_atribut : detail.harga_atribut,\r\n          //         ongkos : detail.ongkos,\r\n          //         sub_total : detail.sub_total,\r\n          //         keterangan : detail.keterangan,\r\n          //         deskripsi : detail.deskripsi,\r\n          //         deskripsi_contoh : detail.deskripsi_contoh,\r\n          //       }\r\n          //       pesanan.push(row)\r\n          //     });\r\n          // });\r\n\r\n          // localStorage.setItem(\r\n          //   \"validasi_pesanan\",\r\n          //   JSON.stringify(pesanan)\r\n          // );\r\n          this.props.dispatch(saveValidasiJual(res.data[0].penjualan));\r\n          this.props.dispatch(saveValidasiBeli(res.data[0].pembelian));\r\n          // this.props.dispatch(saveValidasiTitipan(res.data[0].titipan));\r\n          // this.props.dispatch(saveValidasiPesanan(pesanan));\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        ToastNotification(\"info\", err.response?.data || \"Terjadi Kesalahan Saat Request Data\");\r\n        this.setState({\r\n          isLoading: false,\r\n          DataValidasi: [],\r\n        });\r\n        this.props.dispatch(saveValidasiJual([]));\r\n        this.props.dispatch(saveValidasiBeli([]));\r\n        this.props.dispatch(saveValidasiTitipan([]));\r\n        this.props.dispatch(saveValidasiPesanan([]));\r\n        localStorage.setItem(\r\n          \"validasi_jual\",\r\n          JSON.stringify([])\r\n        );\r\n        localStorage.setItem(\r\n          \"validasi_beli\",\r\n          JSON.stringify([])\r\n        );\r\n        localStorage.setItem(\r\n          \"validasi_titipan\",\r\n          JSON.stringify([])\r\n        );\r\n        localStorage.setItem(\r\n          \"validasi_pesanan\",\r\n          JSON.stringify([])\r\n        );\r\n      });\r\n  }\r\n\r\n\r\n  render() {\r\n    const selectRowPenjualan = {\r\n      mode: \"checkbox\",\r\n      clickToSelect: true,\r\n      selectColumnPosition: \"left\",\r\n      onSelect: (row, isSelect, rowIndex, e) => {\r\n        // console.log(isSelect);\r\n        if (isSelect === true) {\r\n          let hasil = {\r\n            no_faktur_group: row.no_faktur_group,\r\n          };\r\n          let cek = JSON.parse(localStorage.getItem(\"data_validasi_jual\")) || [];\r\n          let hasil_cek = cek.findIndex(\r\n            (hasil) => hasil.no_faktur_group === row.no_faktur_group\r\n          );\r\n          if (hasil_cek === -1) {\r\n            cek.push(hasil);\r\n            localStorage.setItem(\"data_validasi_jual\", JSON.stringify(cek));\r\n          }\r\n        } else {\r\n          // console.log();\r\n          if (localStorage.getItem(\"data_validasi_jual\") === null) {\r\n          } else {\r\n            let data = JSON.parse(localStorage.getItem(\"data_validasi_jual\"));\r\n            data.splice(row.no_faktur_group, 1);\r\n            localStorage.setItem(\"data_validasi_jual\", JSON.stringify(data));\r\n          }\r\n        }\r\n      },\r\n      onSelectAll: (isSelect, data, e) => {\r\n        data.forEach((list, index) => {\r\n          if (isSelect === true) {\r\n            let hasil = {\r\n              no_faktur_group: list.no_faktur_group,\r\n            };\r\n            let cek = JSON.parse(localStorage.getItem(\"data_validasi_jual\")) || [];\r\n            let hasil_cek = cek.findIndex(\r\n              (hasil) => hasil.no_faktur_group === list.no_faktur_group\r\n            );\r\n            if (hasil_cek === -1) {\r\n              cek.push(hasil);\r\n              localStorage.setItem(\"data_validasi_jual\", JSON.stringify(cek));\r\n            }\r\n          } else {\r\n            if (localStorage.getItem(\"data_validasi_jual\") === null) {\r\n            } else {\r\n              let data = JSON.parse(localStorage.getItem(\"data_validasi_jual\"));\r\n              data.splice(list.no_faktur_group, 1);\r\n              localStorage.setItem(\"data_validasi_jual\", JSON.stringify(data));\r\n            }\r\n          }\r\n        });\r\n      },\r\n    };\r\n    const selectRowPembelian = {\r\n      mode: \"checkbox\",\r\n      clickToSelect: true,\r\n      selectColumnPosition: \"left\",\r\n      onSelect: (row, isSelect, rowIndex, e) => {\r\n        // console.log(isSelect);\r\n        if (isSelect === true) {\r\n          let hasil = {\r\n            no_faktur_group: row.no_faktur_group,\r\n          };\r\n          let cek = JSON.parse(localStorage.getItem(\"data_validasi_beli\")) || [];\r\n          let hasil_cek = cek.findIndex(\r\n            (hasil) => hasil.no_faktur_group === row.no_faktur_group\r\n          );\r\n          if (hasil_cek === -1) {\r\n            cek.push(hasil);\r\n            localStorage.setItem(\"data_validasi_beli\", JSON.stringify(cek));\r\n          }\r\n        } else {\r\n          // console.log();\r\n          if (localStorage.getItem(\"data_validasi_beli\") === null) {\r\n          } else {\r\n            let data = JSON.parse(localStorage.getItem(\"data_validasi_beli\"));\r\n            data.splice(row.no_faktur_group, 1);\r\n            localStorage.setItem(\"data_validasi_beli\", JSON.stringify(data));\r\n          }\r\n        }\r\n      },\r\n      onSelectAll: (isSelect, data, e) => {\r\n        data.forEach((list, index) => {\r\n          if (isSelect === true) {\r\n            let hasil = {\r\n              no_faktur_group: list.no_faktur_group,\r\n            };\r\n            let cek = JSON.parse(localStorage.getItem(\"data_validasi_beli\")) || [];\r\n            let hasil_cek = cek.findIndex(\r\n              (hasil) => hasil.no_faktur_group === list.no_faktur_group\r\n            );\r\n            if (hasil_cek === -1) {\r\n              cek.push(hasil);\r\n              localStorage.setItem(\"data_validasi_beli\", JSON.stringify(cek));\r\n            }\r\n          } else {\r\n            if (localStorage.getItem(\"data_validasi_beli\") === null) {\r\n            } else {\r\n              let data = JSON.parse(localStorage.getItem(\"data_validasi_beli\"));\r\n              data.splice(list.no_faktur_group, 1);\r\n              localStorage.setItem(\"data_validasi_beli\", JSON.stringify(data));\r\n            }\r\n          }\r\n        });\r\n      },\r\n    };\r\n    return (\r\n      <form onSubmit={this.props.handleSubmit} autoComplete=\"off\"\r\n      onKeyPress={(e) => {\r\n        e.key === \"Enter\" && e.preventDefault();\r\n      }}\r\n      >\r\n        <div className=\"row\">\r\n          {/* <div className=\"col-3\">\r\n            <Field\r\n              name=\"kode_sales\"\r\n              onChange={(e) => this.getDataSales(e)}\r\n              label=\"Pilih Kode Sales\"\r\n              placeholder=\"Masukan Kode Sales\"\r\n              options={this.props.DataSales.map((list) => {\r\n                let data = {\r\n                  value: list.kode_sales,\r\n                  name: list.nama_sales,\r\n                };\r\n                return data;\r\n              })}\r\n              component={ReanderSelect}\r\n            />\r\n          </div>\r\n          <div className=\"col-3\">\r\n            <Field\r\n              name=\"nama_sales\"\r\n              component={ReanderField}\r\n              type=\"text\"\r\n              label=\"Nama Sales\"\r\n              placeholder=\"Masukan Nama Sales\"\r\n              readOnly={true}\r\n            />\r\n          </div>\r\n          <div className=\"col-3\">\r\n            <Field\r\n              name=\"grandtotal\"\r\n              component={ReanderField}\r\n              type=\"text\"\r\n              label=\"Grand Total\"\r\n              placeholder=\"Grand Total\"\r\n              readOnly={true}\r\n              customeCss={this.state.warna ? \"customeInput\" : \"\"}\r\n            />\r\n          </div>\r\n          <div className=\"col-3\">\r\n            <label>&nbsp;</label>\r\n            <button\r\n              onClick={() => this.getDetaValidasi()}\r\n              className=\"btn btn-primary btn-block\"\r\n              disabled={this.state.isLoading}\r\n              type=\"button\"\r\n            >\r\n              {this.state.isLoading ? (\r\n                <>\r\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Cari Data\r\n                </>\r\n              ) : (\r\n                \"Cari Data\"\r\n              )}\r\n            </button>\r\n          </div> */}\r\n          {/* <div className=\"col-3\">\r\n          <Field\r\n              name=\"grand_total\"\r\n              component={ReanderField}\r\n              type=\"text\"\r\n              label=\"Grand Total\"\r\n              placeholder=\"Grand Total\"\r\n              readOnly={true}\r\n            />\r\n          </div> */}\r\n          <div className=\"col-12\">\r\n            <Panel>\r\n              <PanelHeader>List Data Penjualan</PanelHeader>\r\n              <br />\r\n              <Tabel\r\n                selectRow={selectRowPenjualan}\r\n                keyField=\"no_faktur_jual\"\r\n                columns={this.props.columnsJual}\r\n                data={this.props.saveValidasiJual || []}\r\n                empty={true}\r\n              />\r\n            </Panel>\r\n          </div>\r\n          <div className=\"col-12\">\r\n            <Panel>\r\n              <PanelHeader>List Data Pembelian</PanelHeader>\r\n              <br />\r\n              <Tabel\r\n                selectRow={selectRowPembelian}\r\n                keyField=\"no_faktur_beli\"\r\n                columns={this.props.columnsBeli}\r\n                data={this.props.saveValidasiBeli || []}\r\n                empty={true}\r\n              />\r\n            </Panel>\r\n          </div>\r\n          {/* <div className=\"col-12\">\r\n            <Panel>\r\n              <PanelHeader>List Data Titipan</PanelHeader>\r\n              <br />\r\n              <Tabel\r\n                keyField=\"kode_dept\"\r\n                columns={this.props.columnsTitipan}\r\n                data={this.props.saveValidasiTitipan || []}\r\n                empty={true}\r\n              />\r\n            </Panel>\r\n          </div>\r\n          <div className=\"col-12\">\r\n            <Panel>\r\n              <PanelHeader>List Data Pesanan</PanelHeader>\r\n              <br />\r\n              <Tabel\r\n                keyField=\"kode_dept\"\r\n                columns={this.props.columnsPesanan}\r\n                data={this.props.saveValidasiPesanan || []}\r\n                empty={true}\r\n              />\r\n            </Panel>\r\n          </div> */}\r\n          <div className=\"col-6\">\r\n            {this.props.btnValidasi === false ? (\r\n              <button\r\n                className=\"btn btn-primary btn-block\"\r\n                disabled={true}\r\n                type=\"button\"\r\n              >\r\n                Validasi\r\n              </button>\r\n            ) : (\r\n              <button\r\n                className=\"btn btn-primary btn-block\"\r\n                disabled={this.props.isLoading}\r\n                type=\"submit\"\r\n              >\r\n                {this.props.isLoading ? (\r\n                  <>\r\n                    <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Validasi\r\n                  </>\r\n                ) : (\r\n                  \"Validasi\"\r\n                )}\r\n              </button>\r\n            )}\r\n          </div>\r\n          <div className=\"col-6\">\r\n            <button\r\n              className=\"btn btn-warning btn-block\"\r\n              disabled={this.props.isLoadingBtl}\r\n              onClick={this.props.btnClear}\r\n              type=\"button\"\r\n            >\r\n              {this.props.isLoadingBtl ? (\r\n                <>\r\n                  <i className=\"fas fa-spinner fa-spin\"></i> &nbsp; Batal\r\n                </>\r\n              ) : (\r\n                \"Batal\"\r\n              )}\r\n            </button>\r\n          </div>\r\n        </div>\r\n        {this.props.isLoading || this.props.isLoadingBtl || this.state.isLoading ? (\r\n        <Loading \r\n        loading\r\n        background=\"rgba(0, 0, 0, 0.35)\"\r\n         loaderColor=\"rgba(94, 147, 117, 1)\" />\r\n      ) : null}\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nHeadValidasiJualBeli = reduxForm({\r\n  form: \"HeadValidasiJualBeliHutang\",\r\n  enableReinitialize: true,\r\n})(HeadValidasiJualBeli);\r\nexport default connect(maptostate, null)(HeadValidasiJualBeli);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { reduxForm, reset } from \"redux-form\";\r\nimport {\r\n  disableButtonValidasi,\r\n  saveValidasiBeli,\r\n  saveValidasiJual,\r\n  // saveValidasiPesanan,\r\n  // saveValidasiTitipan,\r\n} from \"../../../actions/hutang_action.jsx\";\r\nimport { ToastNotification } from \"../../../components/helpers/notification.jsx\";\r\nimport { Panel, PanelBody, PanelHeader } from \"../../../components/panel/panel.jsx\";\r\nimport { getImage, postDataNoTImeOut } from \"../../../config/axios.jsx\";\r\nimport HeadValidasiJualBeli from \"./HeadValidasiJualBeli.jsx\";\r\nimport CetakFakturJualBeli from \"./pdf/CetakFakturJualBeli.jsx\";\r\nimport notFound from \"../../../assets/image-not-found.png\";\r\n\r\n\r\nclass FormValidasiJualBeli extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isLoading: false,\r\n      isLoadingBtl: false,\r\n      columnsJual: [\r\n        {\r\n          dataField: \"no_faktur_jual\",\r\n          text: \"No FJ\",\r\n          footer: (cell, row, num, index) => {\r\n            return (\r\n              <div>\r\n                Total Barang :{\" \"}\r\n                {JSON.parse(localStorage.getItem(\"validasi_jual\")) === null\r\n                  ? 0\r\n                  : JSON.parse(localStorage.getItem(\"validasi_jual\")).length ||\r\n                    0}{\" \"}\r\n              </div>\r\n            );\r\n          },\r\n        },\r\n        {\r\n          dataField: \"kode_barcode\",\r\n          text: \"Kode Barcode \",\r\n        },\r\n        {\r\n          dataField: \"nama_barang\",\r\n          text: \"Nama Barang\",\r\n          footer: \"\",\r\n          footerAttrs: {\r\n            colSpan: \"3\",\r\n          },\r\n        },\r\n        {\r\n          dataField: \"nama_atribut\",\r\n          text: \"Nama Atribut\",\r\n        },\r\n       \r\n        {\r\n          dataField: \"berat\",\r\n          text: \"Berat\",\r\n          formatter: (cell) => {\r\n            return cell.toFixed(3);\r\n          },\r\n          footer: (columnData) =>\r\n            columnData.reduce((acc, item) => acc + item, 0).toFixed(3),\r\n        },\r\n        // {\r\n        //   dataField: \"ongkos\",\r\n        //   text: \"Ongkos\",\r\n        //   headerClasses: 'text-right',\r\n        //   formatter: (cell) => {\r\n        //     return <div className=\"text-right\">{parseFloat(cell).toLocaleString(\"kr-KO\")}</div>;\r\n        //   },\r\n        //   footer: (columnData) => {\r\n        //     return <div className=\"text-right\"> { columnData\r\n        //       .reduce((acc, item) => acc + item, 0)\r\n        //       .toLocaleString(\"kr-KO\")  }</div>;\r\n        //   },\r\n        // },\r\n        {\r\n          dataField: \"harga_total\",\r\n          text: \"Harga\",\r\n          headerClasses: 'text-right',\r\n          footer: (columnData) => {\r\n            localStorage.setItem(\r\n              \"total_harga_beli\",\r\n              columnData.reduce((acc, item) => acc + item, 0)\r\n            );\r\n            return <div className=\"text-right\"> { columnData\r\n              .reduce((acc, item) => acc + item, 0)\r\n              .toLocaleString(\"kr-KO\")  }</div>;\r\n          },\r\n          formatter: (cell) => {\r\n            return <div className=\"text-right\">{parseFloat(cell).toLocaleString(\"kr-KO\")}</div>;\r\n          },\r\n        },\r\n      ],\r\n      columnsBeli: [\r\n        {\r\n          dataField: \"no_faktur_beli\",\r\n          text: \"No FB \",\r\n          // footer: \"Total Barang\",\r\n          footer: (cell, row, num, index) => {\r\n            return (\r\n              <div>\r\n                Total Barang :{\" \"}\r\n                {JSON.parse(localStorage.getItem(\"validasi_beli\")) === null\r\n                  ? 0\r\n                  : JSON.parse(localStorage.getItem(\"validasi_beli\")).length ||\r\n                    0}{\" \"}\r\n              </div>\r\n            );\r\n          },\r\n        },\r\n        {\r\n          dataField: \"kode_dept\",\r\n          text: \"Kode Jenis \",\r\n        },\r\n        {\r\n          dataField: \"nama_barang\",\r\n          text: \"Nama Barang\",\r\n          footer: \"\",\r\n          footerAttrs: {\r\n            colSpan: \"3\",\r\n          },\r\n        },\r\n        {\r\n          dataField: \"kondisi\",\r\n          text: \"Kondisi\",\r\n        },\r\n        {\r\n          dataField: \"berat\",\r\n          text: \"Berat\",\r\n          formatter: (cell) => {\r\n            return cell.toFixed(3);\r\n          },\r\n          footer: (columnData) =>\r\n            columnData.reduce((acc, item) => acc + item, 0).toFixed(3),\r\n        },\r\n        {\r\n          dataField: \"harga\",\r\n          text: \"Harga\",\r\n          headerClasses: 'text-right',\r\n          footer: (columnData) => {\r\n            localStorage.setItem(\r\n              \"total_harga_beli\",\r\n              columnData.reduce((acc, item) => acc + item, 0)\r\n            );\r\n            return <div className=\"text-right\"> { columnData\r\n              .reduce((acc, item) => acc + item, 0)\r\n              .toLocaleString(\"kr-KO\")  }</div>;\r\n          },\r\n          formatter: (cell) => {\r\n            return <div className=\"text-right\">{parseFloat(cell).toLocaleString(\"kr-KO\")}</div>;\r\n          },\r\n        },\r\n      ],\r\n      columnsTitipan: [\r\n        {\r\n          dataField: \"no_titip_group\",\r\n          text: \"No Titipan\",\r\n          // footer: \"Total Barang\",\r\n          footer: (cell, row, num, index) => {\r\n            return (\r\n              <div>\r\n                Total Barang :{\" \"}\r\n                {JSON.parse(localStorage.getItem(\"validasi_titipan\")) === null\r\n                  ? 0\r\n                  : JSON.parse(localStorage.getItem(\"validasi_titipan\")).length ||\r\n                    0}{\" \"}\r\n              </div>\r\n            );\r\n          },\r\n        },\r\n        {\r\n          dataField: \"kode_dept\",\r\n          text: \"Kode Jenis \",\r\n        },\r\n        {\r\n          dataField: \"nama_barang\",\r\n          text: \"Nama Barang\",\r\n          footer: \"\",\r\n          footerAttrs: {\r\n            colSpan: \"3\",\r\n          },\r\n        },\r\n        {\r\n          dataField: \"kondisi\",\r\n          text: \"Kondisi\",\r\n        },\r\n        {\r\n          dataField: \"berat\",\r\n          text: \"Berat\",\r\n          formatter: (cell) => {\r\n            return cell.toFixed(3);\r\n          },\r\n          footer: (columnData) =>\r\n            columnData.reduce((acc, item) => acc + item, 0).toFixed(3),\r\n        },\r\n        {\r\n          dataField: \"total_dp\",\r\n          text: \"Total Dp\",\r\n          headerClasses: 'text-right',\r\n          footer: (columnData) => {\r\n            return <div className=\"text-right\"> { columnData\r\n              .reduce((acc, item) => acc + item, 0)\r\n              .toLocaleString(\"kr-KO\")  }</div>;\r\n          },\r\n          formatter: (cell) => {\r\n            return <div className=\"text-right\">{parseFloat(cell).toLocaleString(\"kr-KO\")}</div>;\r\n          },\r\n        },\r\n        {\r\n          dataField: \"harga_total\",\r\n          text: \"Total Transaksi\",\r\n          headerClasses: 'text-right',\r\n          footer: (columnData) => {\r\n            localStorage.setItem(\r\n              \"total_harga_beli\",\r\n              columnData.reduce((acc, item) => acc + item, 0)\r\n            );\r\n            return <div className=\"text-right\"> { columnData\r\n              .reduce((acc, item) => acc + item, 0)\r\n              .toLocaleString(\"kr-KO\")  }</div>;\r\n          },\r\n          formatter: (cell) => {\r\n            return <div className=\"text-right\">{parseFloat(cell).toLocaleString(\"kr-KO\")}</div>;\r\n          },\r\n        },\r\n      ],\r\n      columnsPesanan: [\r\n        {\r\n          dataField: \"no_pesanan\",\r\n          text: \"No Pesanan\",\r\n          // footer: \"Total Barang\",\r\n          footerAttrs: {\r\n            colSpan: \"3\",\r\n          },\r\n          footer: (cell, row, num, index) => {\r\n            return (\r\n              <div>\r\n                Total Barang :{\" \"}\r\n                {JSON.parse(localStorage.getItem(\"validasi_pesanan\")) === null\r\n                  ? 0\r\n                  : JSON.parse(localStorage.getItem(\"validasi_pesanan\")).length ||\r\n                    0}{\" \"}\r\n              </div>\r\n            );\r\n          },\r\n        },\r\n        {\r\n          dataField: \"kode_kategori\",\r\n          text: \"Kode Kategori \",\r\n        },\r\n    \r\n        {\r\n          dataField: \"perkiraan_kadar\",\r\n          text: \"Perkiraan Kadar\",\r\n        },\r\n        {\r\n          dataField: \"harga_gram\",\r\n          text: \"Harga / Gram\",\r\n          formatter: (cell) => {\r\n            return cell.toLocaleString(\"kr-KO\");\r\n          },\r\n          footer: (columnData) =>\r\n          columnData.reduce((acc, item) => acc + item, 0).toLocaleString(\"kr-KO\"),\r\n        },\r\n        {\r\n          dataField: \"perkiraan_berat\",\r\n          text: \"Berat\",\r\n          formatter: (cell) => {\r\n            return cell.toFixed(3);\r\n          },\r\n          footer: (columnData) =>\r\n          columnData.reduce((acc, item) => acc + item, 0).toFixed(3),\r\n        },\r\n        {\r\n          dataField: \"deskripsi_contoh\",\r\n          text: \"Deskripsi\",\r\n        },\r\n        {\r\n          dataField: \"sub_total\",\r\n          text: \"Total\",\r\n          headerClasses: 'text-right',\r\n          footer: (columnData) => {\r\n            localStorage.setItem(\r\n              \"total_harga_beli\",\r\n              columnData.reduce((acc, item) => acc + item, 0)\r\n            );\r\n            return <div className=\"text-right\"> { columnData\r\n              .reduce((acc, item) => acc + item, 0)\r\n              .toLocaleString(\"kr-KO\")  }</div>;\r\n          },\r\n          formatter: (cell) => {\r\n            return <div className=\"text-right\">{parseFloat(cell).toLocaleString(\"kr-KO\")}</div>;\r\n          },\r\n        },\r\n      ],\r\n    };\r\n    // no_pesanan: element.no_pesanan,\r\n    // kode_kategori : detail.kode_kategori,\r\n    // perkiraan_berat : detail.perkiraan_berat,\r\n    // perkiraan_kadar : detail.perkiraan_kadar,\r\n    // harga_gram : detail.harga_gram,\r\n    // harga_atribut : detail.harga_atribut,\r\n    // ongkos : detail.ongkos,\r\n    // sub_total : detail.sub_total,\r\n    // keterangan : detail.keterangan,\r\n    // deskripsi : detail.deskripsi,\r\n    // deskripsi_contoh : detail.deskripsi_contoh,\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.btnClear = this.btnClear.bind(this);\r\n  }\r\n\r\n  btnClear() {\r\n    this.setState({\r\n      isLoadingBtl: true,\r\n    });\r\n    setTimeout(() => {\r\n      localStorage.removeItem(\"validasi_titipan\");\r\n      localStorage.removeItem(\"validasi_jual\");\r\n      localStorage.removeItem(\"validasi_beli\");\r\n      this.props.dispatch(reset(\"HeadValidasiJualBeliHutang\"));\r\n      this.props.dispatch(saveValidasiJual([]));\r\n      this.props.dispatch(saveValidasiBeli([]));\r\n      this.props.dispatch(disableButtonValidasi(false));\r\n      this.setState({\r\n        isLoadingBtl: false,\r\n      });\r\n    }, 1000);\r\n  }\r\n  componentWillUnmount() {\r\n    this.props.dispatch(saveValidasiJual([]));\r\n    this.props.dispatch(saveValidasiBeli([]));\r\n  }\r\n  componentDidMount(){\r\n    localStorage.setItem(\"validasi_jual\", \"[]\")\r\n    localStorage.setItem(\"data_validasi_jual\", \"[]\")\r\n    localStorage.setItem(\"validasi_beli\", \"[]\")\r\n    localStorage.setItem(\"data_validasi_beli\", \"[]\")\r\n  }\r\n  handleSubmit(data) {\r\n\r\n    let validasi_jual = JSON.parse(localStorage.getItem(\"data_validasi_jual\")) || [];\r\n    let validasi_beli = JSON.parse(localStorage.getItem(\"data_validasi_beli\")) || [];\r\n    if(validasi_jual.length === 0 && validasi_beli.length === 0){\r\n      ToastNotification(\"info\", \"Data yang akan divalidasi kosong, Silahkan pilih minimal 1 faktur.\")\r\n      return false;\r\n    }\r\n\r\n    this.setState({\r\n      isLoading : true\r\n    })\r\n    let penjualan = [];\r\n    let pembelian = [];\r\n   \r\n    if (validasi_jual.length === 0) {\r\n      penjualan = [];\r\n    } else {\r\n      validasi_jual.forEach((item, index) => {\r\n        let penjualan_tmp = { no_faktur_group: item.no_faktur_group };\r\n        penjualan.push(penjualan_tmp);\r\n      });\r\n    }\r\n\r\n    if (validasi_beli.length === 0) {\r\n      pembelian = [];\r\n    } else {\r\n      validasi_beli.forEach((item, index) => {\r\n        let pembelian_tmp = { no_faktur_group: item.no_faktur_group };\r\n        pembelian.push(pembelian_tmp);\r\n      });\r\n    }\r\n    let hasil = {\r\n      penjualan: penjualan,\r\n      pembelian: pembelian,\r\n    };\r\n   \r\n    postDataNoTImeOut(\"validasi/simpan/jualbeli\", hasil)\r\n      .then(async(res) => {\r\n        // return false;\r\n      \r\n        if (res.data.notajual.length !== 0) {\r\n          // CetakFakturJualBeli(res.data);\r\n          const DataFaktur = [];\r\n          for (const hasil of res.data.notajual) {\r\n            const IsiFaktur = [];\r\n            for (const DetailFaktur of hasil.Faktur) {\r\n              if (DetailFaktur.jenis === \"gambar\") {\r\n                await getImage('foto_produk/'+DetailFaktur.isi).then((res) => {\r\n                  DetailFaktur.isi = res;\r\n                }).catch((err)=>{\r\n                  // console.log(err);\r\n                DetailFaktur.isi = notFound;\r\n                })\r\n              }\r\n              IsiFaktur.push(DetailFaktur);\r\n            }\r\n            DataFaktur.push({ Faktur: IsiFaktur });\r\n          }\r\n          setTimeout(() => {\r\n            this.setState({\r\n              isLoadingValidasi : false,\r\n              isLoading : false\r\n            })\r\n            CetakFakturJualBeli({notajual : DataFaktur});\r\n          }, 200);\r\n        }\r\nif (res.data.notabeli.length !== 0) {\r\n// console.log(res.data.notabeli);\r\nlet notabeli = [];\r\nfor (let index = 0; index < 2; index++) {\r\nlet feedback = '';\r\nres.data.notabeli.forEach((row, index) => {\r\nlet jml_alamat = row.head.n_alamat_customer.length;\r\nfeedback += `========================================\\n`;\r\nfeedback += `            NOTA PEMBELIAN              \\n`\r\nfeedback += `========================================\r\nTanggal          : ${row.head.tgl_system}\r\nNama Customer    : ${row.head.nama_customer}\r\nNo Hp            : ${row.head.no_hp}\r\nAlamat Customer  : ${row.head.n_alamat_customer.slice(0,20)}\\n`\r\nif(jml_alamat>20){\r\nfeedback += `                   ${row.head.n_alamat_customer.slice(20,40)}\\n`;\r\n}\r\nif(jml_alamat>40){\r\nfeedback += `                   ${row.head.n_alamat_customer.slice(40,60)}\\n`;\r\n}\r\nfeedback += `========================================\\n`\r\nfeedback += `Keterangan\\n`\r\nfeedback += `========================================\\n`\r\nlet total = 0;\r\nlet harga_nota = 0;\r\nrow.detail.forEach((detail, index) => {\r\ntotal = total + detail.harga;\r\nharga_nota = harga_nota + detail.harga_nota;\r\nlet jml_nama_barang = detail.nama_barang.length;\r\nfeedback += `No Faktur Beli : ${detail.no_faktur_beli}\\n`\r\nfeedback += `Jenis Barang   : ${detail.kode_dept}\\n`\r\nfeedback += `Nama Barang    : ${detail.nama_barang.slice(0,20)}\\n`\r\nif(jml_nama_barang>20){\r\nfeedback += `                 ${detail.nama_barang.slice(20,40)}\\n`;\r\n}\r\nif(jml_nama_barang>40){\r\nfeedback += `                 ${detail.nama_barang.slice(40,60)}\\n`;\r\n}\r\nfeedback += `Berat          : ${detail.berat.toFixed(3)} Gram\\n`\r\nfeedback += `Harga          : ${detail.harga.toLocaleString(\"kr-KO\")}\\n`\r\nfeedback += `Harga Rata     : ${Number((parseFloat(detail.harga) / parseFloat(detail.berat)).toFixed(0)).toLocaleString(\"kr-KO\")}\\n`\r\nfeedback += `========================================\\n`\r\n})\r\nfeedback += `Total          : ${total.toLocaleString(\"kr-KO\")}\\n`\r\nfeedback += `========================================\\n`\r\nfeedback += `Harga Waktu Beli   : ${total.toLocaleString(\"kr-KO\")}\\n`\r\nfeedback += `Harga Waktu Jual   : ${harga_nota.toLocaleString(\"kr-KO\")}\\n`\r\nfeedback += `========================================\\n`\r\nfeedback += `\r\n\r\n\r\n\r\n`\r\n})\r\n  notabeli.push(feedback)\r\n}\r\n  \r\n          document.getElementById(\"myInput\").value = notabeli.join('');\r\n        setTimeout(() => {\r\n          this.TextFile();\r\n        }, 100);\r\n}\r\n        localStorage.removeItem(\"validasi_jual\");\r\n        localStorage.removeItem(\"validasi_beli\");\r\n        this.props.dispatch(reset(\"HeadValidasiJualBeliHutang\"));\r\n        this.props.dispatch(saveValidasiJual([]));\r\n        this.props.dispatch(saveValidasiBeli([]));\r\n        this.props.dispatch(disableButtonValidasi(false));\r\n        ToastNotification(\"success\", \"Validasi Transaksi Berhasil\");\r\n        this.setState({\r\n          isLoadingValidasi : false,\r\n          isLoading : false\r\n        })\r\n      })\r\n      .catch((err) => {\r\n        // console.log(err.response.data);\r\n        this.setState({\r\n          isLoadingValidasi : false,\r\n          isLoading : false\r\n        })\r\n        ToastNotification(\"info\", \"Terjadi Kesalahaan Saat Mengirim Data\");\r\n      });\r\n  }\r\n  TextFile() {\r\n    const element = document.createElement(\"a\");\r\n    const file = new Blob([document.getElementById(\"myInput\").value], {\r\n      type: \"text/plain;charset=utf-8\",\r\n    });\r\n    element.href = URL.createObjectURL(file);\r\n    element.download = \"autoprint_pembelian.txt\";\r\n    document.body.appendChild(element);\r\n    element.click();\r\n  }\r\n \r\n  render() {\r\n    return (\r\n      <div>\r\n        <ol className=\"breadcrumb float-xl-right\">\r\n          <li className=\"breadcrumb-item\">\r\n            <Link to=\"#\">Kasir</Link>\r\n          </li>\r\n          <li className=\"breadcrumb-item active\">Validasi</li>\r\n        </ol>\r\n        <h1 className=\"page-header\">Validasi </h1>\r\n        <Panel>\r\n          <PanelHeader>Validasi</PanelHeader>\r\n          <textarea\r\n            style={{ display: \"none\" }}\r\n            id=\"myInput\"\r\n            rows=\"100\"\r\n            cols=\"100\"\r\n          />\r\n          <textarea\r\n            style={{ display: \"none\" }}\r\n            id=\"nota_titip\"\r\n            rows=\"100\"\r\n            cols=\"100\"\r\n          />\r\n          <textarea\r\n            style={{ display: \"none\" }}\r\n            id=\"nota_pesanan\"\r\n            rows=\"100\"\r\n            cols=\"100\"\r\n          />\r\n\r\n          <br />\r\n          {/* Validasi Jual Beli */}\r\n          {/* <button onClick={()=>this.cetakFaktur()}> Print </button> */}\r\n          <PanelBody>\r\n            <HeadValidasiJualBeli\r\n              onSubmit={(data) => this.handleSubmit(data)}\r\n              isLoading={this.state.isLoading}\r\n              btnClear={() => this.btnClear()}\r\n              isLoadingBtl={this.state.isLoadingBtl}\r\n              columnsBeli={this.state.columnsBeli}\r\n              columnsJual={this.state.columnsJual}\r\n              columnsTitipan={this.state.columnsTitipan}\r\n              columnsPesanan={this.state.columnsPesanan}\r\n            />\r\n          </PanelBody>\r\n          <br />\r\n          {/* End Tambah Validasi Jual Beli  */}\r\n        </Panel>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nFormValidasiJualBeli = reduxForm({\r\n  form: \"FormValidasiJualBeli\",\r\n  enableReinitialize: true,\r\n})(FormValidasiJualBeli);\r\nexport default connect()(FormValidasiJualBeli);\r\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAGQCAMAAABF6+6qAAAAM1BMVEXz9Pa5vsrp6+/Q09vBxdDl5+vw8fS+ws66wMvi5enS1t3HzNXa3ePt7vHe4ebLz9jV2N8T7rePAAAEfklEQVR42uzBgQAAAACAoP2pF6kCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGD27m7HTRgIoLCHAHGG3/d/2q7SrSZtTRZs7ZJ4zncLEhcc2WAZAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB4R924Xn6ejl0fUK1+bOUsV50C6tS1cqY4B9RolrNpQH3O70pkDajNFOUF3AIqs8graAPq0shr4AG+Mqu8hiGgKoPNRpefZ1ePAVWJ8mkJZ7ABswmoifzRhTP0D9dHRfrjI0ZVYeMTYeEtEBbuCAtvgbBwR1h4C8/D6rvbrZvC3wgLRWE1ayt3rT4eIyyUhDUt8mCZ7AhhIT+sOW5uHyYsZIc1PtnkSVjIDWuUhDH8RljIDKuL8i+79YSF3LBaSWr78IGwkBnWLCYxGRIW8sIann/xQFjICquRBDuHsJAX1ijydC4kLGSFpbLpEnbrVsLyLBHWIpuW/V1FUcJy7FhYw4GuRJSw/PqGEctWWJWw3Dr2jKX7u7pTwvIqEdZc+lZ4i1YiYTmVCGuSTdPOrowSlk+HVt6H3V0ZJSyXUmHdZMO8vyujhOVRIqzNIWs40pVRwnIoGVYTJSE2h7oySlj+JMNKT4bzwa6MEpY76bDCHDO7SlPC8iYRVvKfAm2X0ZVRwnJmK6zQrw+ZxLXP6sooYfnyX1imn5erfLguYx8yuzJKWK4kwzL91EzBHO/KKGF5shWWKezKKGE5UhqWdfU1JSw/CsOyrvZQwnKjLCzrah8lLC+KwrKu9lLCciIjrIyujBKWDxlh5XRllLBcyAgrqyujhOXB7rCasawro4TlwN6wmquMZV0ZJaz6fRWWdSUylnVllLCq94u9e8tNGIaiKBqXFCg4lPmPtjItMlLvV6zm4a41hq2rI/84CCvuqshtXVUXYfUuCivuqshtXVUXYXUuDCvuqshNXVUnYXUuCCvoqsqvXQmLWWHVrqpcuxIWM8OqXVX52ZWwmB1W7arK310Ji1lhxV0VuXQlLGaEVbuKHM5JWMwJq3YVExbzw6pdCYvGsOKuhEVjWHFXwqIxrLgrYdEYVtyVsGgMK+5KWDSGFXclLBrDirsSFo1hxV0Ji8aw4q6ERXtY1/SLsBAWWyAsCmGxD8KiEBb7ICwKYbEPwqIQFvsgLAphsQ/ColgirMO4AGF17jWsP+IX+/9IWDwIi10QFg/CYheExYOw2If0dBvW8PYSNj0Z04/Tx3FY3PuYnqaBnnymbRgHunJL23AZ6MrxlDbBxOpNTltwGOjNNa3vZLr3ZxrT2s4esXo0rX2zRgOrU/dzWtHhONCpY76u1NZ4d646N70tb3KsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOCrPTgkAAAAABD0/7UrbAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAvwBQ1zWzb+cicAAAAABJRU5ErkJggg==\"","import BwipJs from \"bwip-js\";\r\nimport jsPDF from \"jspdf\";\r\nimport \"jspdf-autotable\";\r\n\r\n// const base_url = JSON.parse(localStorage.getItem(\"base_url\"));\r\nimport notFound from \"../../../../assets/image-not-found.png\";\r\nimport { getUserdata } from \"../../../../components/helpers/function\";\r\nconst CetakFakturJualBeli = (data = \"\", kode_baki = \"\") => {\r\n  // initialize jsPDF\r\n  const doc = new jsPDF();\r\n  //   let data = JSON.parse(localStorage.getItem(\"tt_pengeluaran_barang\")) || []\r\n  doc.setFontSize(15);\r\n  doc.setFontSize(10);\r\n  doc.setProperties({\r\n    title: \"Cetak Faktur Penjualan\",\r\n  });\r\n  doc.setFont(\"tahoma\");\r\n  // let notFound = base_url + \"image-not-found.png\";\r\n\r\n  data.notajual.forEach((row, index) => {\r\n    row.Faktur.forEach((list, index) => {\r\n      if(getUserdata().kode_toko===\"KNG\"){\r\n        doc.setFontSize(6);\r\n      }else if(getUserdata().kode_toko===\"MNI\"){\r\n          doc.setFontSize(8);\r\n      }else{\r\n        doc.setFontSize(10);\r\n      }\r\n      if(list.status===true){\r\n      if (list.jenis === \"text\") {\r\n        doc.text(\r\n          list.position_x * 0.2645833333,\r\n          (parseFloat(list.position_y) + 15) * 0.2645833333,\r\n          doc.splitTextToSize(list.isi, list.width * 0.2645833333),\r\n          null,\r\n          parseInt(list.rotate * -1)\r\n        );\r\n      } else if (list.jenis === \"gambar\") {\r\n        if (list.rotate > 0) {\r\n          doc.addImage(\r\n            list.isi,\r\n            \"jpg\",\r\n            list.position_x * 0.2645833333,\r\n            parseFloat(list.position_y) * 0.2645833333 -\r\n              list.width * 0.2645833333,\r\n            list.width * 0.2645833333,\r\n            list.height * 0.2645833333,\r\n            \"\",\r\n            \"\",\r\n            parseInt(list.rotate * -1)\r\n          );\r\n        } else {\r\n          doc.addImage(\r\n            list.isi,\r\n            \"jpg\",\r\n            list.position_x * 0.2645833333,\r\n            parseFloat(list.position_y) * 0.2645833333,\r\n            list.width * 0.2645833333,\r\n            list.height * 0.2645833333\r\n          );\r\n        }\r\n      } else {\r\n        if (list.rotate > 0) {\r\n          doc.addImage(\r\n            notFound,\r\n            \"JPEG\",\r\n            list.position_x * 0.2645833333,\r\n            parseFloat(list.position_y) * 0.2645833333 -\r\n              list.width * 0.2645833333 +\r\n              25,\r\n            list.width * 0.2645833333,\r\n            list.height * 0.2645833333,\r\n            \"\",\r\n            \"\",\r\n            parseInt(list.rotate * -1)\r\n          );\r\n          // doc.addImage(img.src, 'JPEG', list.position_x * 0.2645833333,\r\n          //   parseFloat(list.position_y) * 0.2645833333,\r\n          //   list.width * 0.2645833333 - 15,\r\n          //   list.height * 0.2645833333,\r\n          //  )\r\n        } else {\r\n          // console.log(list.isi);\r\n          BwipJs.toCanvas(\"itf\", {\r\n            bcid: \"code128\", // Barcode type\r\n            text: list.isi, // Text to encode\r\n            scale: 3, // 3x scaling factor\r\n            height: 10, // Bar height, in millimeters\r\n            includetext: false, // Show human-readable text\r\n            textxalign: \"center\", // Always good to set this\r\n          });\r\n          const img = document.getElementById(\"itf\");\r\n          var dataURL = img.toDataURL();\r\n          doc.addImage(\r\n          dataURL,\r\n          \"JPEG\",\r\n          list.position_x * 0.2645833333,\r\n          parseFloat(list.position_y) * 0.2645833333 -\r\n          list.width * 0.2645833333 + 25,\r\n          list.width * 0.2645833333,\r\n          list.height * 0.2645833333,\r\n          \"\",\r\n          \"\",\r\n          );\r\n        }\r\n        }\r\n      }\r\n    });\r\n    if (index < data.notajual.length - 1) {\r\n      doc.addPage();\r\n    }\r\n  });\r\n  // doc.text('NPWP 14.10.431.5-5001.000',8.2020833333,154.78125)\r\n  // doc.addImage(dataURL,\"JPEG\", 14, 25);\r\n  // doc.autoPrint();\r\n  if (data.notajual.length > 10) {\r\n    doc.save(`Cetak Faktur Penjualan.pdf`);\r\n  } else {\r\n    var string = doc.output(\"datauristring\");\r\n    // var embed = \"<embed width='100%' height='100%' src='\" + string + \"'/>\";\r\n    var x = window.open();\r\n    x.document.open();\r\n    x.document.write(\r\n      \"<html><head><title>Cetak Faktur Penjualan</title></head><body style='margin:0 !important'><embed width='100%' height='100%'  src=\" +\r\n        string +\r\n        \"></embed></body></html>\"\r\n    );\r\n  }\r\n  // x.document.write(embed);\r\n  // setInterval(() => {\r\n  //   x.close();\r\n  // }, 1000);\r\n};\r\n\r\nexport default CetakFakturJualBeli;\r\n"],"sourceRoot":""}