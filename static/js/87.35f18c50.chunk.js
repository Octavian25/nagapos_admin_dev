(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{1280:function(a,t,e){"use strict";e.r(t);var n=e(19),i=e(20),r=e(33),s=e(22),o=e(21),l=e(0),u=e.n(l),d=e(28),c=e(123),g=e(58),m=e(311),b=e(312),p=e(42),k=e(9),h=e(78),_=e(36),f=e(211),S=e(13),B=function(a){var t={};return a.baki_asal||(t.baki_asal="Baki Asal Tidak Boleh Kosong"),a.baki_tujuan||(t.baki_tujuan="Baki Tujuan Tidak Boleh Kosong"),a.gudang_asal||(t.gudang_asal="Gudang Asal Tidak Boleh Kosong"),a.gudang_tujuan||(t.gudang_tujuan="Gudang Tujuan Tidak Boleh Kosong"),t},j=e(210),v=e.n(j),O=function(a){Object(s.a)(e,a);var t=Object(o.a)(e);function e(a){var i;return Object(n.a)(this,e),(i=t.call(this,a)).state={date:new Date,isLoadingBaki:!1,isLoadingBatal:!1,bakigudangtujuan:!1,loadingpencarian:!1},i}return Object(i.a)(e,[{key:"componentDidMount",value:function(){var a=this;this.props.dispatch(Object(k.Lb)()),this.props.dispatch(Object(k.Fb)()),setTimeout(function(){a.setState({gudang_asal:"TOKO"}),a.props.change("gudang_asal","TOKO")},100)}},{key:"filterLaporan",value:function(){var a=this;this.setState({loadingpencarian:!0}),this.setState({bakigudangtujuan:!0}),Object(S.d)("barang/get/by-kode-baki?kode_baki="+this.state.baki_asal).then(function(t){0===t.data.length?(a.setState({loadingpencarian:!1,bakigudangtujuan:!1}),Object(_.e)("info","Data Yang Dicari Tidak Ada"),localStorage.setItem("data_barang_satu_baki_tmp",JSON.stringify([])),a.props.dispatch(Object(p.s)([]))):(localStorage.setItem("data_barang_satu_baki_tmp",JSON.stringify([])),localStorage.setItem("data_barang_satu_baki_tmp",JSON.stringify(t.data)),a.props.dispatch(Object(p.s)(t.data)),a.setState({loadingpencarian:!1}))}).catch(function(t){a.setState({bakigudangtujuan:!1}),a.errorHandling(t)})}},{key:"errorHandling",value:function(a){this.setState({loadingpencarian:!1,bakigudangtujuan:!1}),Object(_.e)("info","Data Yang Dicari Tidak Ada"),localStorage.setItem("data_barang_satu_baki_tmp",JSON.stringify([])),this.props.dispatch(Object(p.s)([]))}},{key:"batalHancur",value:function(){var a=this;this.setState({isLoadingBatal:!0}),setTimeout(function(){a.props.dispatch(Object(p.s)([])),localStorage.setItem("data_barang_satu_baki_tmp",JSON.stringify([])),a.setState({isLoadingBatal:!1})},500)}},{key:"render",value:function(){var a=this;return u.a.createElement("form",{onSubmit:this.props.handleSubmit,autoComplete:"off",onKeyPress:function(a){"Enter"===a.key&&a.preventDefault()}},u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-lg-4"},u.a.createElement(m.a,{label:"Gudang Asal",name:"gudang_asal",onChange:function(t){a.setState({gudang_asal:t,bakigudangtujuan:!1}),a.props.change("baki_asal",""),a.props.dispatch(Object(p.s)([])),localStorage.setItem("data_barang_satu_baki_tmp",JSON.stringify([]))},options:this.props.datagudang.filter(function(a){return void 0!==a.kode_gudang}).map(function(a){return{value:a.kode_gudang,name:a.kode_gudang+" - "+a.nama_gudang}}),placeholder:"Silahkan Pilih Gudang Asal",component:h.f})),u.a.createElement("div",{className:"col-lg-4"},!1===this.state.isLoadingBaki?u.a.createElement(m.a,{label:"Baki Asal",name:"baki_asal",onChange:function(t){a.setState({baki_asal:t})},options:this.props.databaki.filter(function(t){return t.kode_gudang===a.state.gudang_asal}).map(function(a){return{value:a.kode_baki,name:a.kode_baki+" - "+a.nama_baki}||[]}),placeholder:"Silahkan Pilih Baki Asal",component:h.f}):u.a.createElement(h.g,{label:"Baki Asal"})),u.a.createElement("div",{className:"col-lg-4"},u.a.createElement("label",null," \xa0 "),u.a.createElement("button",{className:"btn btn-primary btn-block",disabled:this.submitting,onClick:function(){return a.filterLaporan()},type:"button"},this.state.loadingpencarian?u.a.createElement(u.a.Fragment,null,u.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Mencari Data"):"Cari Data")),!1===this.state.bakigudangtujuan?null:u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"col-lg-6"},u.a.createElement(m.a,{label:"Gudang Tujuan",name:"gudang_tujuan",onChange:function(t){a.setState({gudang_tujuan:t}),a.props.change("baki_tujuan","")},options:this.props.datagudang.filter(function(a){return void 0!==a.kode_gudang}).map(function(a){return{value:a.kode_gudang,name:a.kode_gudang+" - "+a.nama_gudang}}),placeholder:"Silahkan Pilih Gudang Tujuan",component:h.f})),u.a.createElement("div",{className:"col-lg-6"},!1===this.state.isLoadingBaki?u.a.createElement(m.a,{label:"Baki Tujuan",name:"baki_tujuan",options:this.props.databaki.filter(function(t){return t.kode_gudang===a.state.gudang_tujuan}).map(function(a){return{value:a.kode_baki,name:a.kode_baki+" - "+a.nama_baki}||[]}),placeholder:"Silahkan Pilih Baki Tujuan",component:h.f}):u.a.createElement(h.g,{label:"Baki Tujuan"})))),u.a.createElement(f.a,{keyField:"kode_barcode",exportCsv:!1,data:0===this.props.setBarangPindahSatuBaki.length?JSON.parse(localStorage.getItem("data_barang_satu_baki_tmp")):this.props.setBarangPindahSatuBaki,columns:this.props.columns,empty:!0,pagination:"off",textEmpty:"Data Barang Kosong"}),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-10"},u.a.createElement("button",{className:"btn btn-primary",disabled:this.props.submitting,type:"submit"},this.props.isLoading?u.a.createElement(u.a.Fragment,null,u.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Menyimpan"):"Simpan Data"),"\xa0",u.a.createElement("button",{className:"btn btn-warning",type:"button",onClick:function(){return a.batalHancur()},disabled:this.props.isLoadingBatal},this.state.isLoadingBatal?u.a.createElement(u.a.Fragment,null,u.a.createElement("i",{className:"fas fa-spinner fa-spin"})," \xa0 Sedang Membatal"):"Batal"))),this.props.isLoading?u.a.createElement(v.a,{loading:!0,background:"rgba(0, 0, 0, 0.35)",loaderColor:"rgba(94, 147, 117, 1)"}):null)}}]),e}(l.Component);O=Object(b.a)({form:"HeadPindahBarangSatuBaki",enableReinitialize:!0,validate:B})(O);var E=Object(g.b)(function(a){return{datagudang:a.datamaster.getDataGudang,databaki:a.datamaster.getDataBaki,setBarangPindahSatuBaki:a.databarang.setBarangPindahSatuBaki}},null)(O),N=e(27),y=e.n(N),T=e(64),D=function(a){Object(s.a)(e,a);var t=Object(o.a)(e);function e(a){var i;return Object(n.a)(this,e),(i=t.call(this,a)).state={isEdit:!1,modalDialog:!1,isLoading:!1,columns:[{dataField:"kode_barcode",text:"Kode Barcode",footerAttrs:{colSpan:"5"},footer:function(a,t,e,n){return u.a.createElement("div",null,"Total Barang : ",0===i.props.setBarangPindahSatuBaki.length?null===JSON.parse(localStorage.getItem("data_barang_satu_baki_tmp"))?0:JSON.parse(localStorage.getItem("data_barang_satu_baki_tmp")).length:i.props.setBarangPindahSatuBaki.length," ")}},{dataField:"kode_group",text:"Gudang Asal"},{dataField:"kode_dept",text:"Baki Asal"},{dataField:"nama_barang",text:"Nama Barang"},{dataField:"nama_atribut",text:"Nama Atribut"},{dataField:"berat",text:"Berat",formatter:function(a){return a.toFixed(1)},footer:function(a){return a.reduce(function(a,t){return a+t},0).toFixed(1)}}]},i.handleSubmit=i.handleSubmit.bind(Object(r.a)(i)),i}return Object(i.a)(e,[{key:"hapusdata",value:function(a){var t=this;y.a.fire({title:"Anda Yakin !!",text:"Ingin Menghapus Data Ini ?",icon:"warning",position:"top-center",cancelButtonText:"Tidak",showCancelButton:!0,confirmButtonText:"OK",showConfirmButton:!0}).then(function(e){if(e.isConfirmed){var n=JSON.parse(localStorage.getItem("data_barang_satu_baki_tmp"));n.splice(a,1),localStorage.setItem("data_barang_satu_baki_tmp",JSON.stringify(n)),t.props.dispatch(Object(p.s)(n))}})}},{key:"componentDidMount",value:function(){localStorage.setItem("data_barang_satu_baki_tmp","[]")}},{key:"handleSubmit",value:function(a){var t=this;this.setState({isLoading:!0});var e={kode_gudang:a.gudang_tujuan,kode_toko:a.baki_tujuan,kode_gudang_asal:a.gudang_asal,kode_toko_asal:a.baki_asal};Object(S.m)("pindahbarang/addbanyak",e).then(function(){t.setState({isLoading:!1})}).then(function(){localStorage.setItem("data_barang_satu_baki_tmp",JSON.stringify([]))}).then(function(){t.props.dispatch(Object(p.s)([]))}).then(function(){t.props.dispatch(Object(T.d)("HeadPindahBarangSatuBaki"))}).then(function(){Object(_.e)("success","Data Berhasil Disimpan")}).catch(function(a){return t.errorhandling(a)})}},{key:"errorhandling",value:function(a){Object(_.e)("info",/conflict/i.test(a.response.data)?"Terjadi Kesalahan Saat Mengirim Data":a.response.data),this.setState({isLoading:!1})}},{key:"render",value:function(){var a=this;return u.a.createElement("div",null,u.a.createElement("ol",{className:"breadcrumb float-xl-right"},u.a.createElement("li",{className:"breadcrumb-item"},u.a.createElement(d.b,{to:"#"},"Barang")),u.a.createElement("li",{className:"breadcrumb-item active"},"Pindah Barang Satu Baki")),u.a.createElement("h1",{className:"page-header"},"Pindah Barang Satu Baki "),u.a.createElement(c.a,null,u.a.createElement(c.c,null,"Pindah Barang Satu Baki"),u.a.createElement("br",null),u.a.createElement("div",{className:"container"},u.a.createElement(E,{isLoading:this.state.isLoading,onSubmit:function(t){return a.handleSubmit(t)},data:this.props.setBarangPindahSatuBaki,columns:this.state.columns})),u.a.createElement("br",null)))}}]),e}(u.a.Component);t.default=Object(g.b)(function(a){return{setBarangPindahSatuBaki:a.databarang.setBarangPindahSatuBaki}},null)(D)}}]);
//# sourceMappingURL=87.35f18c50.chunk.js.map